var O1=Object.defineProperty;var T1=(i,l,f)=>l in i?O1(i,l,{enumerable:!0,configurable:!0,writable:!0,value:f}):i[l]=f;var A=(i,l,f)=>(T1(i,typeof l!="symbol"?l+"":l,f),f);(function(){const l=document.createElement("link").relList;if(l&&l.supports&&l.supports("modulepreload"))return;for(const g of document.querySelectorAll('link[rel="modulepreload"]'))C(g);new MutationObserver(g=>{for(const L of g)if(L.type==="childList")for(const _ of L.addedNodes)_.tagName==="LINK"&&_.rel==="modulepreload"&&C(_)}).observe(document,{childList:!0,subtree:!0});function f(g){const L={};return g.integrity&&(L.integrity=g.integrity),g.referrerPolicy&&(L.referrerPolicy=g.referrerPolicy),g.crossOrigin==="use-credentials"?L.credentials="include":g.crossOrigin==="anonymous"?L.credentials="omit":L.credentials="same-origin",L}function C(g){if(g.ep)return;g.ep=!0;const L=f(g);fetch(g.href,L)}})();(function(i){let l,f;function C(){f.frequency.value=0}function g(){l.resume()}const L=1,_=2,k=4,R=64,y=64,v=[{id:"U",index:12,physicalButtonPressed:!1,pressedPrevious:!1,pressedCurrent:!1,isPressed:!1,isJustPressed:!1,isJustReleased:!1},{id:"D",index:13,physicalButtonPressed:!1,pressedPrevious:!1,pressedCurrent:!1,isPressed:!1,isJustPressed:!1,isJustReleased:!1},{id:"L",index:14,physicalButtonPressed:!1,pressedPrevious:!1,pressedCurrent:!1,isPressed:!1,isJustPressed:!1,isJustReleased:!1},{id:"R",index:15,physicalButtonPressed:!1,pressedPrevious:!1,pressedCurrent:!1,isPressed:!1,isJustPressed:!1,isJustReleased:!1},{id:"A",index:0,physicalButtonPressed:!1,pressedPrevious:!1,pressedCurrent:!1,isPressed:!1,isJustPressed:!1,isJustReleased:!1},{id:"B",index:1,physicalButtonPressed:!1,pressedPrevious:!1,pressedCurrent:!1,isPressed:!1,isJustPressed:!1,isJustReleased:!1}],X=()=>{for(const s of v)s.physicalButtonPressed=!1},W=(s,e)=>e>s.buttons.length-1?null:s.buttons[e],D=[{id:"U",x:13,y:78,width:9,height:9,pressedPrevious:!1,pressedCurrent:!1,isPressed:!1,isJustPressed:!1,isJustReleased:!1},{id:"D",x:13,y:98,width:9,height:9,pressedPrevious:!1,pressedCurrent:!1,isPressed:!1,isJustPressed:!1,isJustReleased:!1},{id:"L",x:3,y:88,width:9,height:9,pressedPrevious:!1,pressedCurrent:!1,isPressed:!1,isJustPressed:!1,isJustReleased:!1},{id:"R",x:23,y:88,width:9,height:9,pressedPrevious:!1,pressedCurrent:!1,isPressed:!1,isJustPressed:!1,isJustReleased:!1},{id:"A",x:42,y:88,width:12,height:12,pressedPrevious:!1,pressedCurrent:!1,isPressed:!1,isJustPressed:!1,isJustReleased:!1},{id:"B",x:57,y:79,width:12,height:12,pressedPrevious:!1,pressedCurrent:!1,isPressed:!1,isJustPressed:!1,isJustReleased:!1}];let O,S,F;const B=new Map,p1=(s,e)=>!![...s.values()].includes(e),w1=s=>s1(s.pageX,s.pageY,-1),m1=s=>t1(s.pageX,s.pageY,-1),P1=s=>i1(s.pageX,s.pageY,-1),L1=s=>{for(const e of s.changedTouches)s1(e.pageX,e.pageY,e.identifier)},C1=s=>{s.preventDefault();for(const e of s.changedTouches)t1(e.pageX,e.pageY,e.identifier)},R1=s=>{s.preventDefault();for(const e of s.changedTouches)i1(e.pageX,e.pageY,e.identifier)},s1=(s,e,t)=>{const r=r1(s,e),o=n1(r.x,r.y);o==null?B.set(`${t}`,"-"):B.set(`${t}`,o.id)},t1=(s,e,t)=>{if(B.get(`${t}`)){const r=r1(s,e),o=n1(r.x,r.y);o==null?B.set(`${t}`,"-"):B.set(`${t}`,o.id)}},i1=(s,e,t)=>B.delete(`${t}`),r1=(s,e)=>{if(screen!=null)return{x:Math.round(((s-O.offsetLeft)/O.clientWidth+.5)*S),y:Math.round(((e-O.offsetTop)/O.clientHeight+.5)*F)}},n1=(s,e)=>{for(let t=0;t<D.length;t++){const r=D[t];if(s>=r.x&&s<=r.x+r.width&&e>=r.y&&e<=r.y+r.height)return r}return null},I=[{id:"U",codes:["ArrowUp","KeyW"],physicalKeyDown:!1,pressedPrevious:!1,pressedCurrent:!1,isPressed:!1,isJustPressed:!1,isJustReleased:!1},{id:"D",codes:["ArrowDown","KeyS"],physicalKeyDown:!1,pressedPrevious:!1,pressedCurrent:!1,isPressed:!1,isJustPressed:!1,isJustReleased:!1},{id:"L",codes:["ArrowLeft","KeyA"],physicalKeyDown:!1,pressedPrevious:!1,pressedCurrent:!1,isPressed:!1,isJustPressed:!1,isJustReleased:!1},{id:"R",codes:["ArrowRight","KeyD"],physicalKeyDown:!1,pressedPrevious:!1,pressedCurrent:!1,isPressed:!1,isJustPressed:!1,isJustReleased:!1},{id:"A",codes:["KeyZ","Period"],physicalKeyDown:!1,pressedPrevious:!1,pressedCurrent:!1,isPressed:!1,isJustPressed:!1,isJustReleased:!1},{id:"B",codes:["KeyX","Slash"],physicalKeyDown:!1,pressedPrevious:!1,pressedCurrent:!1,isPressed:!1,isJustPressed:!1,isJustReleased:!1}],y1=s=>{s.code!=="F1"&&s.code!=="F3"&&s.code!=="F6"&&s.code!=="F7"&&s.code!=="Tab"&&s.code!=="AltLeft"&&s.code!=="AltRight"&&s.code!=="ArrowRight"&&s.code!=="ArrowDown"&&s.code!=="ArrowLeft"&&s.code!=="ArrowUp"||s.preventDefault();const e=o1(s.code);e!=null&&(e.physicalKeyDown=!0)},B1=s=>{const e=o1(s.code);e!=null&&(e.physicalKeyDown=!1)},o1=s=>{for(let e=0;e<I.length;e++){const t=I[e];if(t.codes.includes(s))return t}return null},N=0,G=4096,U=4102,j=4104,q=4104,H=[];function J(s){if(s<0||s>q)throw`Invalid address: peek ${s}`;return H[s]}function x(s,e){if(s<0||s>q)throw`Invalid address: poke ${s}`;H[s]=e}const J1={charWidth:3,charHeight:5,charTrackingDefault:1,charMap:[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,1,0,0,1,0,0,1,0,0,0,0,0,1,0],[1,0,1,1,0,1,0,0,0,0,0,0,0,0,0],[1,0,1,1,1,1,1,0,1,1,1,1,1,0,1],[0,1,0,1,1,1,1,0,0,1,1,1,0,1,0],[1,0,1,0,0,1,0,1,0,1,0,0,1,0,1],[1,1,0,1,1,0,1,1,1,1,0,1,0,1,1],[0,1,0,0,1,0,0,0,0,0,0,0,0,0,0],[0,0,1,0,1,0,0,1,0,0,1,0,0,0,1],[1,0,0,0,1,0,0,1,0,0,1,0,1,0,0],[0,0,0,1,0,1,0,1,0,1,0,1,0,0,0],[0,0,0,0,1,0,1,1,1,0,1,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,1,0,1,0,0],[0,0,0,0,0,0,1,1,1,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,1,0],[0,0,1,0,0,1,0,1,0,1,0,0,1,0,0],[1,1,1,1,0,1,1,0,1,1,0,1,1,1,1],[0,1,0,1,1,0,0,1,0,0,1,0,1,1,1],[1,1,1,0,0,1,1,1,1,1,0,0,1,1,1],[1,1,1,0,0,1,0,1,1,0,0,1,1,1,1],[1,0,1,1,0,1,1,1,1,0,0,1,0,0,1],[1,1,1,1,0,0,1,1,1,0,0,1,1,1,1],[1,1,1,1,0,0,1,1,1,1,0,1,1,1,1],[1,1,1,0,0,1,0,0,1,0,0,1,0,0,1],[1,1,1,1,0,1,1,1,1,1,0,1,1,1,1],[1,1,1,1,0,1,1,1,1,0,0,1,1,1,1],[0,0,0,0,1,0,0,0,0,0,1,0,0,0,0],[0,0,0,0,1,0,0,0,0,0,1,0,1,0,0],[0,0,1,0,1,0,1,0,0,0,1,0,0,0,1],[0,0,0,1,1,1,0,0,0,1,1,1,0,0,0],[1,0,0,0,1,0,0,0,1,0,1,0,1,0,0],[1,1,1,0,0,1,0,1,0,0,0,0,0,1,0],[1,1,1,1,0,1,1,0,1,1,0,0,1,1,1],[1,1,1,1,0,1,1,1,1,1,0,1,1,0,1],[1,1,1,1,0,1,1,1,0,1,0,1,1,1,1],[1,1,1,1,0,0,1,0,0,1,0,0,1,1,1],[1,1,0,1,0,1,1,0,1,1,0,1,1,1,0],[1,1,1,1,0,0,1,1,0,1,0,0,1,1,1],[1,1,1,1,0,0,1,1,0,1,0,0,1,0,0],[1,1,1,1,0,0,1,0,1,1,0,1,1,1,1],[1,0,1,1,0,1,1,1,1,1,0,1,1,0,1],[1,1,1,0,1,0,0,1,0,0,1,0,1,1,1],[0,0,1,0,0,1,0,0,1,1,0,1,1,1,1],[1,0,1,1,0,1,1,1,0,1,0,1,1,0,1],[1,0,0,1,0,0,1,0,0,1,0,0,1,1,1],[1,0,1,1,1,1,1,0,1,1,0,1,1,0,1],[1,0,1,1,1,1,1,1,1,1,0,1,1,0,1],[1,1,1,1,0,1,1,0,1,1,0,1,1,1,1],[1,1,1,1,0,1,1,1,1,1,0,0,1,0,0],[1,1,1,1,0,1,1,0,1,1,1,1,0,0,1],[1,1,1,1,0,1,1,1,0,1,0,1,1,0,1],[1,1,1,1,0,0,1,1,1,0,0,1,1,1,1],[1,1,1,0,1,0,0,1,0,0,1,0,0,1,0],[1,0,1,1,0,1,1,0,1,1,0,1,1,1,1],[1,0,1,1,0,1,1,0,1,1,0,1,0,1,0],[1,0,1,1,0,1,1,0,1,1,1,1,1,0,1],[1,0,1,1,0,1,0,1,0,1,0,1,1,0,1],[1,0,1,1,0,1,0,1,0,0,1,0,0,1,0],[1,1,1,0,0,1,0,1,0,1,0,0,1,1,1],[0,1,1,0,1,0,0,1,0,0,1,0,0,1,1],[1,0,0,1,0,0,0,1,0,0,0,1,0,0,1],[1,1,0,0,1,0,0,1,0,0,1,0,1,1,0],[0,1,0,1,0,1,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,1,1,1],[1,0,0,0,1,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,1,1,1,1,1,1,1,1],[0,0,0,1,0,0,1,1,1,1,0,1,1,1,1],[0,0,0,0,0,0,1,1,1,1,0,0,1,1,1],[0,0,0,0,0,1,1,1,1,1,0,1,1,1,1],[0,0,0,0,0,0,1,1,0,1,1,0,1,1,1],[0,0,0,0,1,1,0,1,0,1,1,1,0,1,0],[0,0,0,1,1,1,1,1,1,0,0,1,1,1,1],[0,0,0,1,0,0,1,1,1,1,0,1,1,0,1],[0,0,0,0,1,0,0,0,0,0,1,0,0,1,0],[0,0,0,0,1,0,0,0,0,0,1,0,1,1,0],[0,0,0,1,0,0,1,0,1,1,1,0,1,0,1],[0,0,0,0,1,0,0,1,0,0,1,0,0,1,1],[0,0,0,0,0,0,1,1,1,1,1,1,1,0,1],[0,0,0,0,0,0,1,1,1,1,0,1,1,0,1],[0,0,0,0,0,0,1,1,1,1,0,1,1,1,1],[0,0,0,1,1,1,1,0,1,1,1,1,1,0,0],[0,0,0,1,1,1,1,0,1,1,1,1,0,0,1],[0,0,0,0,0,0,1,1,1,1,0,0,1,0,0],[0,0,0,0,0,0,0,1,1,0,1,0,1,1,0],[0,0,0,0,1,0,1,1,1,0,1,0,0,1,1],[0,0,0,0,0,0,1,0,1,1,0,1,1,1,1],[0,0,0,0,0,0,1,0,1,1,0,1,0,1,0],[0,0,0,0,0,0,1,0,1,1,1,1,1,1,1],[0,0,0,0,0,0,1,0,1,0,1,0,1,0,1],[0,0,0,1,0,1,1,1,1,0,0,1,1,1,0],[0,0,0,1,1,1,0,1,0,0,0,1,1,1,0],[0,1,1,0,1,0,1,0,0,0,1,0,0,1,1],[0,1,0,0,1,0,0,1,0,0,1,0,0,1,0],[1,1,0,0,1,0,0,0,1,0,1,0,1,1,0],[0,0,0,0,0,0,0,1,1,1,1,0,0,0,0]]};function $(s,e,t,r){if(s>e){const o=s;s=e,e=o}for(let o=s;o<=e;o++)w(o,t,r)}function w(s,e,t){s<0||s>=R||e<0||e>=y||x(N+(0|s)+(0|e)*R,t)}function _1(s,e,t,r,o){const n=e.charMap[s.charCodeAt(0)-32];for(let d=0;d<e.charWidth;d++)for(let c=0;c<e.charHeight;c++)n[d+c*e.charWidth]===1&&w(t+d,r+c,o)}let T,E,z,K,Z=performance.now();const V=72,Q=128,d1=4,a1=4;function u1(s){s-Z>1e3/61&&(x(j,Math.round(1e3/(s-Z))),Z=s,function(){for(const e of I)e.pressedPrevious=e.pressedCurrent,e.pressedCurrent=e.physicalKeyDown,e.isPressed=e.pressedCurrent,e.isJustPressed=e.pressedCurrent&&!e.pressedPrevious,e.isJustReleased=!e.pressedCurrent&&e.pressedPrevious}(),function(){const e=navigator.getGamepads()[0];if(e)for(const t of v){const r=W(e,t.index);r!=null&&(r.pressed?t.physicalButtonPressed=!0:t.physicalButtonPressed=!1)}for(const t of v)t.pressedPrevious=t.pressedCurrent,t.pressedCurrent=t.physicalButtonPressed,t.isPressed=t.pressedCurrent,t.isJustPressed=t.pressedCurrent&&!t.pressedPrevious,t.isJustReleased=!t.pressedCurrent&&t.pressedPrevious}(),function(){for(const e of D)e.pressedPrevious=e.pressedCurrent,e.pressedCurrent=p1(B,e.id),e.isPressed=e.pressedCurrent,e.isJustPressed=e.pressedCurrent&&!e.pressedPrevious,e.isJustReleased=!e.pressedCurrent&&e.pressedPrevious}(),function(){for(let e=0;e<6;e++){let t=0;(I[e].isPressed||v[e].isPressed||D[e].isPressed)&&(t|=L),(I[e].isJustPressed||v[e].isJustPressed||D[e].isJustPressed)&&(t|=_),(I[e].isJustReleased||v[e].isJustReleased||D[e].isJustReleased)&&(t|=k),x(G+e,t)}}(),function(){const e=J(U),t=J(U+1);e>0&&t>0?function(r){f.frequency.value=r}(e):C(),t>0&&x(U+1,t-1)}(),romLoop(),function(){for(let e=N;e<N+R*y;e++){const t=z[J(e)];K.data[4*e+0]=t.r,K.data[4*e+1]=t.g,K.data[4*e+2]=t.b,K.data[4*e+3]=255}E.putImageData(K,d1,a1)}()),window.requestAnimationFrame(u1)}window.addEventListener("load",function(){(function(){for(let s=0;s<=q;s++)H.push(0)})(),l=new window.AudioContext,f=l.createOscillator(),f.type="square",f.frequency.value=0,f.connect(l.destination),f.start(0),window.addEventListener("mousedown",g),window.addEventListener("touchstart",g),window.addEventListener("keydown",g),document.addEventListener("visibilitychange",()=>{document.visibilityState==="hidden"&&C()}),document.addEventListener("keydown",y1),document.addEventListener("keyup",B1),function(){const s=[0,255,16711680,16711935,65280,65535,16776960,16777215];z=[];for(let e=0;e<=7;e++){const t=s[e],r=(16711680&t)>>16,o=(65280&t)>>8,n=255&t;z.push({r,g:o,b:n})}}(),function(){const s="-webkit-touch-callout: none; -webkit-tap-highlight-color: #000; -webkit-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none; background: #000; color: #888;",e="position: absolute; left: 50%; top: 50%; transform: translate(-50%, -50%); background: #000};",t="image-rendering: -moz-crisp-edges; image-rendering: -webkit-optimize-contrast; image-rendering: -o-crisp-edges; image-rendering: pixelated;";document.body.style.cssText=s,T=document.createElement("canvas"),T.width=V,T.height=Q,E=T.getContext("2d",{alpha:!1}),E.imageSmoothingEnabled=!1,T.style.cssText=e+t,E.fillStyle="#ddd",E.fillRect(0,0,V,Q),E.fillStyle="#333",E.fillRect(d1-1,a1-1,R+2,y+2);const r=()=>{const o=innerWidth/innerHeight,n=V/Q,d=o<n,c=d?innerWidth:innerHeight*n,u=d?innerWidth/n:innerHeight;T.style.width=`${c}px`,T.style.height=`${u}px`};window.addEventListener("resize",r),r(),document.body.appendChild(T),K=E.createImageData(R,y)}(),window.addEventListener("gamepaddisconnected",X),function(s,e,t){O=s,S=e,F=t;const r=O.getContext("2d");r.fillRect(13,78,9,29),r.fillRect(3,88,29,9);const o=new Image;o.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABcAAAAFAQMAAACU+uVzAAAABlBMVEUAAAAzM2bT8ENbAAAAAXRSTlMAQObYZgAAABtJREFUCNdjePdKj6GjS4PhxDsgvWgRQ9+jdwBZWAlP4hlWSwAAAABJRU5ErkJggg==",o.onload=()=>{r.drawImage(o,6,71)};const n=new Image;n.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMAQMAAABsu86kAAAABlBMVEUAAACZADPodVumAAAAAXRSTlMAQObYZgAAABxJREFUCNdj4GdgsD/AUP8AhP5/gCOICFAKqAAAEwUPVSVDKX4AAAAASUVORK5CYII=",n.onload=()=>{r.drawImage(n,42,88),r.drawImage(n,57,79)};const d=new Image;d.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAAFAQMAAABYY9+YAAAABlBMVEUAAAAzM2bT8ENbAAAAAXRSTlMAQObYZgAAABFJREFUCNdjSGCYwPABiCcAAA5KAwFW2JXuAAAAAElFTkSuQmCC",d.onload=()=>{r.drawImage(d,46,101)};const c=new Image;c.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAAFAQMAAABYY9+YAAAABlBMVEUAAAAzM2bT8ENbAAAAAXRSTlMAQObYZgAAAA1JREFUCNdjeMAwAYIBEsoDwUh7niQAAAAASUVORK5CYII=",c.onload=()=>{r.drawImage(c,61,92)},document.addEventListener("mousedown",w1),document.addEventListener("mousemove",m1),document.addEventListener("mouseup",P1),document.addEventListener("touchstart",L1),document.addEventListener("touchmove",C1,{passive:!1}),document.addEventListener("touchend",R1,{passive:!1})}(T,V,Q),romInit(),window.requestAnimationFrame(u1)}),i.ADDRESS_AUD=U,i.ADDRESS_BTN=G,i.ADDRESS_FPS=j,i.ADDRESS_GFX=N,i.Anim=class{constructor(s,e,t){this.frames=s,this.frameTicks=e,this.looping=t}getKeyFrame(s){if(this.frames.length===1)return this.frames[0];let e=Math.floor(s/this.frameTicks);return this.looping?e%=this.frames.length:e=Math.min(this.frames.length-1,e),this.frames[e]}isFinished(s){return!this.looping&&s>=this.frames.length*this.frameTicks}},i.BTN_A=4,i.BTN_B=5,i.BTN_D=1,i.BTN_L=2,i.BTN_R=3,i.BTN_U=0,i.COL_BLK=0,i.COL_BLU=1,i.COL_CYN=5,i.COL_GRN=4,i.COL_MAG=3,i.COL_RED=2,i.COL_WHT=7,i.COL_YEL=6,i.GFX_H=y,i.GFX_W=R,i.Rect=class{constructor(s,e,t,r){this.x=s,this.y=e,this.width=t,this.height=r}overlaps(s){return this.x<s.x+s.width&&this.x+this.width>s.x&&this.y<s.y+s.height&&this.y+this.height>s.y}},i.Vec2=class{constructor(s,e){this.x=s,this.y=e}set(s,e){this.x=s,this.y=e}add(s,e){this.x+=s,this.y+=e}scl(s){this.x*=s,this.y*=s}equals(s){return this.x==s.x&&this.y==s.y}},i.beep=function(s,e,t){(J(U+1)<=0||t)&&(x(U,Math.floor(s)),x(U+1,Math.floor(e)))},i.clamp=function(s,e,t){return Math.max(e,Math.min(s,t))},i.clearGfx=function(s){for(let e=N;e<N+R*y;e++)x(e,s>0?s:0)},i.drawCircle=function(s,e,t,r,o){o>=0&&function(n,d,c,u){let a=0,h=c,m=1-c;for(;a<=h;)$(n-a,n+a,d-h,u),$(n-h,n+h,d-a,u),$(n-h,n+h,d+a,u),$(n-a,n+a,d+h,u),m<0?m+=2*a+1:(m+=2*(a-h)+1,h--),a++}(s,e,t,o),function(n,d,c,u){let a=0,h=c,m=1-c;for(;a<=h;)w(n+a,d+h,u),w(n+a,d-h,u),w(n-a,d+h,u),w(n-a,d-h,u),w(n+h,d+a,u),w(n+h,d-a,u),w(n-h,d+a,u),w(n-h,d-a,u),m<0?m+=2*a+1:(m+=2*(a-h)+1,h--),a++}(s,e,t,r)},i.drawImage=function(s,e,t,r,o,n){const d=[...o];if(n){const c=[];for(;d.length;)c.push(d.splice(0,t));if(n.flipX)for(let u=0;u<r;u++)c[u].reverse();n.flipY&&c.reverse();for(let u=0;u<r;u++)for(let a=0;a<t;a++)d[u*t+a]=c[u][a]}for(let c=0;c<r;c++)for(let u=0;u<t;u++){const a=d[u+c*t];a>=0&&w(s+u,e+c,a)}},i.drawLine=function(s,e,t,r,o){s===t?function(n,d,c,u){if(d>c){const a=d;d=c,c=a}for(let a=d;a<=c;a++)w(n,a,u)}(s,e,r,o):e===r?$(s,t,e,o):function(n,d,c,u,a){const h=Math.abs(c-n),m=Math.abs(u-d),v1=n<c?1:-1,D1=d<u?1:-1;let e1=h-m;for(w(n,d,a),w(c,u,a);n!==c&&d!==u;){const c1=e1<<1;c1>-m&&(e1-=m,n+=v1),c1<h&&(e1+=h,d+=D1),w(n,d,a)}}(s,e,t,r,o)},i.drawPattern=function(s,e,t,r){for(let o=0;o<t.length;o+=2)w(s+t[o],e+t[o+1],r)},i.drawPixel=w,i.drawRectangle=function(s,e,t,r,o,n){let d=0,c=0,u=0,a=0;t<0?(d=s+t+1,u=s):(d=s,u=s+t-1),r<0?(c=e+r+1,a=e):(c=e,a=e+r-1);for(let h=d;h<=u;h++)for(let m=c;m<=a;m++)h==d||h==u||m==c||m==a?w(h,m,o):n>=0&&w(h,m,n)},i.drawText=function(s,e,t,r,o){const n=o!=null&&o.font?o.font:J1,d=(o==null?void 0:o.tracking)>=0?o.tracking:n.charTrackingDefault;let c=s;for(let u=0;u<t.length;u++)_1(t.charAt(u),n,c,e,r),c+=n.charWidth+d},i.fc64Init=function(s,e){window.romInit=s,window.romLoop=e},i.getFps=function(){return J(j)},i.getPixel=function(s,e){return s<0||s>=R||e<0||e>=y?-1:J(N+(0|s)+(0|e)*R)},i.isEmptyObject=function(s){return Object.keys(s).length===0&&s.constructor===Object},i.isJustPressed=function(s){return!!(J(G+s)&_)},i.isJustReleased=function(s){return!!(J(G+s)&k)},i.isPressed=function(s){return!!(J(G+s)&L)},i.peek=J,i.poke=x,i.randomInt=function(s,e){return Math.floor(Math.random()*(e-s+1)+s)},i.swapImageColors=function(s,e,t){if(e.length!=t.length)throw new Error("mismatched old/new list lengths");const r=[...s];for(let o=0;o<e.length;o++)for(let n=0;n<s.length;n++)s[n]===e[o]&&(r[n]=t[o]);return r},i.wrap=function(s,e,t){const r=t-e;return e+((s-e)%r+r)%r}})(window||{});const Y=[-1,0,0,0,0,0,0,0,0,-1,-1,-1,0,0,0,0,0,0,0,-1,-1,-1,-1,0,0,0,0,0,0,0,0,-1,-1,0,0,0,-1,-1,-1,0,0,0,-1,-1,-1,-1,-1,-1,-1,-1,0,0,0,-1,-1,-1,0,0,0,0,0,0,0,0,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,0,0,0,0,0,0,0,0,-1,-1,0,0,0,0,0,0,0,0,0,-1,-1,0,0,0,0,0,0,0,0,0,-1,-1,0,0,0,-1,-1,-1,0,0,0,-1,-1,-1,-1,-1,-1,-1,-1,0,0,0,-1,-1,0,0,0,0,0,0,0,0,0,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,0,0,0,0,0,0,0,0,-1,-1,0,0,0,0,0,0,0,0,0,-1,-1,0,0,0,0,0,0,0,0,0,-1,-1,0,0,0,-1,-1,-1,0,0,0,-1,-1,-1,-1,-1,-1,-1,-1,0,0,0,-1,-1,0,0,0,0,0,0,0,0,0,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,0,0,-1,-1,-1,-1,-1,-1,-1,-1,0,0,0,-1,-1,-1,0,0,0,-1,-1,0,0,0,-1,-1,-1,-1,-1,-1,-1,-1,0,0,0,-1,-1,-1,0,0,0,-1,-1,-1,-1,-1,-1,-1,-1,0,0,0,-1,-1,0,0,0,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,0,0,0,0,0,-1,-1,-1,-1,-1,0,0,0,-1,-1,-1,-1,-1,-1,-1,-1,0,0,0,0,0,0,0,0,-1,-1,-1,0,0,0,0,0,0,0,0,0,-1,-1,-1,-1,-1,-1,-1,-1,0,0,0,-1,-1,0,0,0,0,0,0,0,0,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,0,0,0,0,0,-1,-1,-1,-1,-1,0,0,0,-1,-1,-1,-1,-1,-1,-1,-1,0,0,0,0,0,0,0,0,0,-1,-1,0,0,0,0,0,0,0,0,0,-1,-1,-1,-1,-1,-1,-1,-1,0,0,0,-1,-1,0,0,0,0,0,0,0,0,0,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,0,0,0,0,0,-1,-1,-1,-1,-1,0,0,0,-1,-1,-1,-1,-1,-1,-1,-1,0,0,0,0,0,0,0,0,0,-1,-1,-1,0,0,0,0,0,0,0,0,-1,-1,-1,-1,-1,-1,-1,-1,0,0,0,-1,-1,-1,0,0,0,0,0,0,0,0,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,0,0,-1,-1,-1,-1,-1,-1,-1,-1,0,0,0,-1,-1,-1,-1,-1,-1,-1,-1,0,0,0,-1,-1,-1,0,0,0,-1,-1,-1,-1,-1,-1,-1,-1,0,0,0,-1,-1,0,0,0,-1,-1,-1,0,0,0,-1,-1,-1,-1,-1,-1,-1,-1,0,0,0,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,0,0,-1,-1,-1,-1,-1,-1,-1,-1,0,0,0,-1,-1,-1,0,0,0,-1,-1,0,0,0,-1,-1,-1,0,0,0,-1,-1,-1,-1,-1,-1,-1,-1,0,0,0,-1,-1,0,0,0,-1,-1,-1,0,0,0,-1,-1,-1,-1,-1,-1,-1,-1,0,0,0,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,0,0,-1,-1,-1,-1,-1,-1,-1,-1,0,0,0,0,0,0,0,0,0,-1,-1,0,0,0,0,0,0,0,0,0,-1,-1,-1,-1,-1,-1,-1,-1,0,0,0,-1,-1,0,0,0,0,0,0,0,0,0,-1,-1,0,0,0,0,0,0,0,0,0,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,0,0,-1,-1,-1,-1,-1,-1,-1,-1,0,0,0,0,0,0,0,0,0,-1,-1,0,0,0,0,0,0,0,0,0,-1,-1,-1,-1,-1,-1,-1,-1,0,0,0,-1,-1,0,0,0,0,0,0,0,0,0,-1,-1,0,0,0,0,0,0,0,0,0,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,0,0,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,0,0,0,0,0,0,-1,-1,-1,-1,0,0,0,0,0,0,0,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,0,0,-1,-1,-1,0,0,0,0,0,0,0,-1,-1,-1,0,0,0,0,0,0,0,0,-1],l1=[-1,-1,-1,-1,-1,0,0,0,0,-1,-1,-1,-1,-1,-1,-1,-1,0,0,6,6,6,6,0,0,-1,-1,-1,-1,-1,0,6,6,6,6,6,6,6,6,0,-1,-1,-1,-1,0,6,6,6,6,6,6,6,6,0,-1,-1,-1,0,6,6,6,6,6,6,6,6,6,6,0,-1,-1,0,6,6,6,6,6,6,6,6,6,6,0,-1,-1,0,6,6,6,6,6,6,6,6,6,6,0,-1,-1,-1,0,3,6,6,6,6,6,6,3,0,-1,-1,-1,-1,-1,0,3,3,6,6,3,3,0,-1,-1,-1,-1,-1,0,4,0,3,3,3,3,0,4,0,-1,-1,-1,0,0,4,4,0,0,0,0,4,4,0,0,-1,0,3,0,4,4,4,4,4,4,4,4,0,3,0,0,3,0,0,4,4,4,4,4,4,0,0,3,0,-1,0,0,1,0,0,0,0,0,0,1,0,0,-1,-1,-1,0,1,1,1,1,1,1,1,1,0,-1,-1,-1,-1,0,1,1,1,0,0,1,1,1,0,-1,-1,-1,-1,0,5,5,5,0,0,5,5,5,0,-1,-1,-1,-1,-1,0,0,0,-1,-1,0,0,0,-1,-1,-1],x1=[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,0,0,0,-1,-1,-1,-1,-1,-1,-1,-1,0,0,6,6,6,6,0,0,-1,-1,-1,-1,-1,0,6,6,6,6,6,6,6,6,0,-1,-1,-1,-1,0,6,6,6,6,6,6,6,6,0,-1,-1,-1,0,6,6,6,6,6,6,6,6,6,6,0,-1,-1,0,6,6,6,6,6,6,6,6,6,6,0,-1,-1,0,6,6,6,6,6,6,6,6,6,6,0,-1,-1,-1,0,3,6,6,6,6,6,6,3,0,3,0,-1,-1,-1,0,3,3,6,6,3,3,0,3,3,0,-1,-1,0,4,0,3,3,3,3,0,4,0,0,-1,-1,-1,0,0,4,0,0,0,0,4,4,0,-1,-1,-1,0,3,3,0,4,4,4,4,4,0,0,-1,-1,-1,0,3,3,0,0,0,0,0,0,1,0,-1,-1,-1,-1,0,0,1,1,1,1,1,1,1,0,-1,-1,-1,-1,-1,-1,0,0,0,0,1,1,1,0,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,5,5,5,0,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,0,0,-1,-1,-1],E1=[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,0,0,0,-1,-1,-1,-1,-1,-1,-1,-1,0,0,6,6,6,6,0,0,-1,-1,-1,-1,-1,0,6,6,6,6,6,6,6,6,0,-1,-1,-1,-1,0,6,6,6,6,6,6,6,6,0,-1,-1,-1,0,6,6,6,6,6,6,6,6,6,6,0,-1,-1,0,6,6,6,6,6,6,6,6,6,6,0,-1,-1,0,6,6,6,6,6,6,6,6,6,6,0,-1,0,3,0,3,6,6,6,6,6,6,3,0,-1,-1,0,3,3,0,3,3,6,6,3,3,0,-1,-1,-1,-1,0,0,4,0,3,3,3,3,0,4,0,-1,-1,-1,-1,0,4,4,0,0,0,0,4,0,0,-1,-1,-1,-1,0,0,4,4,4,4,4,0,3,3,0,-1,-1,-1,0,1,0,0,0,0,0,0,3,3,0,-1,-1,-1,0,1,1,1,1,1,1,1,0,0,-1,-1,-1,-1,0,1,1,1,0,0,0,0,-1,-1,-1,-1,-1,-1,0,5,5,5,0,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,0,0,-1,-1,-1,-1,-1,-1,-1,-1],h1=[-1,-1,-1,-1,-1,0,0,0,0,-1,-1,-1,-1,-1,-1,-1,-1,0,0,6,6,6,6,0,0,-1,-1,-1,-1,-1,0,6,6,6,6,6,6,6,6,0,-1,-1,-1,-1,0,6,6,6,6,6,6,6,6,0,-1,-1,-1,0,6,3,6,6,6,6,6,6,6,6,0,-1,-1,0,3,3,3,3,6,6,6,6,6,3,0,-1,-1,0,3,3,3,3,3,3,3,3,3,3,0,-1,-1,-1,0,3,3,0,3,3,0,3,3,0,-1,-1,-1,-1,-1,0,3,0,3,3,0,3,0,-1,-1,-1,-1,-1,0,4,0,3,3,3,3,0,4,0,-1,-1,-1,0,3,4,4,0,0,0,0,4,4,3,0,-1,0,3,3,0,4,4,4,4,4,4,0,3,3,0,0,3,3,0,4,4,4,4,4,4,0,3,3,0,-1,0,0,1,0,0,0,0,0,0,1,0,0,-1,-1,-1,0,1,1,1,1,1,1,1,1,0,-1,-1,-1,-1,0,1,1,1,0,0,1,1,1,0,-1,-1,-1,-1,0,5,5,5,0,0,5,5,5,0,-1,-1,-1,-1,-1,0,0,0,-1,-1,0,0,0,-1,-1,-1],N1=[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,0,0,0,-1,-1,-1,-1,-1,-1,-1,-1,0,0,6,6,6,6,0,0,-1,-1,-1,-1,-1,0,6,6,6,6,6,6,6,6,0,-1,-1,-1,-1,0,6,6,6,6,6,6,6,6,0,-1,-1,-1,0,6,3,6,6,6,6,6,6,6,6,0,-1,-1,0,3,3,3,3,6,6,6,6,6,3,0,-1,-1,0,3,3,3,3,3,3,3,3,3,3,0,-1,-1,-1,0,3,3,0,3,3,0,3,3,0,0,-1,-1,-1,0,0,3,0,3,3,0,3,0,3,3,0,-1,0,3,0,0,3,3,3,3,0,4,0,3,0,-1,0,0,3,3,0,0,0,0,4,4,0,0,-1,-1,-1,0,3,3,0,4,4,4,0,0,0,-1,-1,-1,-1,0,0,0,0,0,0,0,1,1,0,-1,-1,-1,-1,0,1,1,1,1,0,1,1,1,0,-1,-1,-1,-1,-1,0,0,0,0,0,1,1,1,0,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,5,5,5,0,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,0,0,-1,-1,-1],U1=[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,0,0,0,-1,-1,-1,-1,-1,-1,-1,-1,0,0,6,6,6,6,0,0,-1,-1,-1,-1,-1,0,6,6,6,6,6,6,6,6,0,-1,-1,-1,-1,0,6,6,6,6,6,6,6,6,0,-1,-1,-1,0,6,3,6,6,6,6,6,6,6,6,0,-1,-1,0,3,3,3,3,6,6,6,6,6,3,0,-1,-1,0,3,3,3,3,3,3,3,3,3,3,0,-1,-1,0,0,3,3,0,3,3,0,3,3,0,-1,-1,0,3,3,0,3,0,3,3,0,3,0,0,-1,-1,0,3,0,4,0,3,3,3,3,0,0,3,0,-1,-1,0,0,4,4,0,0,0,0,3,3,0,0,-1,-1,-1,0,0,0,4,4,4,0,3,3,0,-1,-1,-1,-1,0,1,1,0,0,0,0,0,0,0,-1,-1,-1,-1,0,1,1,1,0,1,1,1,1,0,-1,-1,-1,-1,0,1,1,1,0,0,0,0,0,-1,-1,-1,-1,-1,0,5,5,5,0,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,0,0,-1,-1,-1,-1,-1,-1,-1,-1],g1=[-1,-1,-1,-1,-1,0,0,0,0,-1,-1,-1,-1,-1,-1,-1,-1,0,0,6,6,6,6,0,0,-1,-1,-1,-1,-1,0,6,6,6,6,6,6,6,6,0,-1,-1,-1,-1,0,6,6,6,6,6,6,6,6,0,-1,-1,-1,0,6,3,6,6,6,6,6,6,6,6,0,-1,-1,0,0,3,3,6,6,6,6,6,6,6,0,-1,-1,-1,0,3,0,3,6,6,3,6,6,6,0,-1,-1,-1,0,3,0,3,3,3,3,3,6,6,0,-1,-1,-1,0,0,3,3,3,3,3,3,3,0,0,-1,-1,-1,-1,0,0,3,3,3,3,3,0,0,-1,-1,-1,-1,-1,-1,0,0,0,0,0,0,0,-1,-1,-1,-1,-1,-1,-1,0,4,0,0,4,4,0,-1,-1,-1,-1,-1,-1,-1,0,0,3,3,0,4,0,-1,-1,-1,-1,-1,-1,-1,0,0,3,3,0,4,0,-1,-1,-1,-1,-1,-1,-1,0,1,0,0,1,0,0,-1,-1,-1,-1,-1,-1,-1,0,1,1,1,1,0,-1,-1,-1,-1,-1,-1,-1,-1,0,5,5,5,5,0,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,0,0,0,-1,-1,-1,-1,-1],b1=[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,0,0,0,-1,-1,-1,-1,-1,-1,-1,-1,0,0,6,6,6,6,0,0,-1,-1,-1,-1,-1,0,6,6,6,6,6,6,6,6,0,-1,-1,-1,-1,0,6,6,6,6,6,6,6,6,0,-1,-1,-1,0,6,3,6,6,6,6,6,6,6,6,0,-1,-1,-1,0,3,3,6,6,6,6,6,6,6,0,-1,-1,-1,0,3,0,3,6,6,3,6,6,6,0,-1,-1,-1,0,3,0,3,3,3,3,3,6,6,0,-1,-1,-1,-1,0,3,3,3,3,3,3,3,0,-1,-1,-1,-1,-1,0,0,3,3,3,3,0,0,-1,-1,-1,-1,-1,0,3,0,0,0,0,0,3,3,0,-1,-1,-1,-1,0,3,0,4,4,4,0,3,3,0,-1,-1,-1,-1,-1,0,0,4,4,4,4,0,0,-1,-1,-1,-1,-1,0,0,1,1,0,1,1,1,0,-1,-1,-1,-1,0,5,5,0,1,0,1,1,0,5,0,-1,-1,-1,-1,0,5,5,0,-1,0,0,5,5,0,-1,-1,-1,-1,-1,0,0,-1,-1,-1,-1,0,0,-1,-1,-1],M1=[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,0,0,0,-1,-1,-1,-1,-1,-1,-1,-1,0,0,6,6,6,6,0,0,-1,-1,-1,-1,-1,0,6,6,6,6,6,6,6,6,0,-1,-1,-1,-1,0,6,6,6,6,6,6,6,6,0,-1,-1,-1,0,6,3,6,6,6,6,6,6,6,6,0,-1,-1,-1,0,3,3,6,6,6,6,6,6,6,0,-1,-1,-1,0,3,0,3,6,6,3,6,6,6,0,-1,-1,-1,0,3,0,3,3,3,3,3,6,6,0,-1,-1,-1,-1,0,3,3,3,3,3,3,3,0,-1,-1,-1,-1,-1,0,0,3,3,3,3,0,0,-1,-1,-1,-1,-1,0,3,3,0,0,0,0,0,3,0,-1,-1,-1,-1,0,3,3,0,4,4,4,0,3,0,-1,-1,-1,-1,-1,0,0,4,4,4,4,0,0,-1,-1,-1,-1,-1,0,0,1,1,0,1,1,1,0,-1,-1,-1,-1,0,5,5,0,1,0,1,1,0,5,0,-1,-1,-1,-1,0,5,5,0,-1,0,0,5,5,0,-1,-1,-1,-1,-1,0,0,-1,-1,-1,-1,0,0,-1,-1,-1],A1=[-1,-1,-1,-1,-1,0,0,0,0,-1,-1,-1,-1,-1,-1,-1,-1,0,0,6,6,6,6,0,0,-1,-1,-1,-1,-1,0,6,6,6,6,6,6,6,6,0,-1,-1,-1,-1,0,6,6,6,6,6,6,6,6,0,-1,-1,-1,0,6,6,6,6,6,6,6,6,3,6,0,-1,-1,0,6,6,6,6,6,6,6,3,3,0,0,-1,-1,0,6,6,6,3,6,6,3,0,3,0,-1,-1,-1,0,6,6,3,3,3,3,3,0,3,0,-1,-1,-1,0,0,3,3,3,3,3,3,3,0,0,-1,-1,-1,-1,0,0,3,3,3,3,3,0,0,-1,-1,-1,-1,-1,-1,0,0,0,0,0,0,0,-1,-1,-1,-1,-1,-1,-1,0,4,4,0,0,4,0,-1,-1,-1,-1,-1,-1,-1,0,4,0,3,3,0,0,-1,-1,-1,-1,-1,-1,-1,0,4,0,3,3,0,0,-1,-1,-1,-1,-1,-1,-1,0,0,1,0,0,1,0,-1,-1,-1,-1,-1,-1,-1,-1,0,1,1,1,1,0,-1,-1,-1,-1,-1,-1,-1,-1,0,5,5,5,5,0,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,0,0,0,-1,-1,-1,-1,-1],I1=[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,0,0,0,-1,-1,-1,-1,-1,-1,-1,-1,0,0,6,6,6,6,0,0,-1,-1,-1,-1,-1,0,6,6,6,6,6,6,6,6,0,-1,-1,-1,-1,0,6,6,6,6,6,6,6,6,0,-1,-1,-1,0,6,6,6,6,6,6,6,6,3,6,0,-1,-1,0,6,6,6,6,6,6,6,3,3,0,-1,-1,-1,0,6,6,6,3,6,6,3,0,3,0,-1,-1,-1,0,6,6,3,3,3,3,3,0,3,0,-1,-1,-1,-1,0,3,3,3,3,3,3,3,0,-1,-1,-1,-1,-1,-1,0,0,3,3,3,3,0,0,-1,-1,-1,-1,-1,0,3,3,0,0,0,0,0,3,0,-1,-1,-1,-1,0,3,3,0,4,4,4,0,3,0,-1,-1,-1,-1,-1,0,0,4,4,4,4,0,0,-1,-1,-1,-1,-1,-1,0,1,1,1,0,1,1,0,0,-1,-1,-1,-1,0,5,0,1,1,0,1,0,5,5,0,-1,-1,-1,0,5,5,0,0,-1,0,5,5,0,-1,-1,-1,-1,-1,0,0,-1,-1,-1,-1,0,0,-1,-1,-1],K1=[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,0,0,0,-1,-1,-1,-1,-1,-1,-1,-1,0,0,6,6,6,6,0,0,-1,-1,-1,-1,-1,0,6,6,6,6,6,6,6,6,0,-1,-1,-1,-1,0,6,6,6,6,6,6,6,6,0,-1,-1,-1,0,6,6,6,6,6,6,6,6,3,6,0,-1,-1,0,6,6,6,6,6,6,6,3,3,0,-1,-1,-1,0,6,6,6,3,6,6,3,0,3,0,-1,-1,-1,0,6,6,3,3,3,3,3,0,3,0,-1,-1,-1,-1,0,3,3,3,3,3,3,3,0,-1,-1,-1,-1,-1,-1,0,0,3,3,3,3,0,0,-1,-1,-1,-1,-1,0,3,0,0,0,0,0,3,3,0,-1,-1,-1,-1,0,3,0,4,4,4,0,3,3,0,-1,-1,-1,-1,-1,0,0,4,4,4,4,0,0,-1,-1,-1,-1,-1,-1,0,1,1,1,0,1,1,0,0,-1,-1,-1,-1,0,5,0,1,1,0,1,0,5,5,0,-1,-1,-1,0,5,5,0,0,-1,0,5,5,0,-1,-1,-1,-1,-1,0,0,-1,-1,-1,-1,0,0,-1,-1,-1];fc64Init(S1,F1);class Y1{constructor(l,f,C,g){A(this,"x");A(this,"y");A(this,"width");A(this,"height");A(this,"red");A(this,"grn");A(this,"blu");A(this,"cyn");A(this,"mag");A(this,"yel");this.x=l,this.y=f,this.width=C,this.height=g,this.red=swapImageColors(Y,[COL_BLK],[COL_RED]),this.grn=swapImageColors(Y,[COL_BLK],[COL_GRN]),this.blu=swapImageColors(Y,[COL_BLK],[COL_BLU]),this.cyn=swapImageColors(Y,[COL_BLK],[COL_CYN]),this.mag=swapImageColors(Y,[COL_BLK],[COL_MAG]),this.yel=swapImageColors(Y,[COL_BLK],[COL_YEL])}draw(){drawImage(this.x,this.y,this.width,this.height,b%18<3?this.red:b%18<6?this.grn:b%18<9?this.blu:b%18<12?this.cyn:b%18<15?this.mag:this.yel)}}class P{constructor(l,f,C){A(this,"x");A(this,"y");A(this,"color");A(this,"duration");this.x=l,this.y=f,this.color=C,this.duration=0}trigger(l){this.duration=l}updateAndDraw(){drawCircle(this.x,this.y,2,this.color,this.duration>0?this.color:-1),this.duration--}}class k1{constructor(l,f,C,g){A(this,"x");A(this,"y");A(this,"width");A(this,"height");A(this,"facing");A(this,"moving");A(this,"movingTicks");A(this,"animU");A(this,"animD");A(this,"animL");A(this,"animR");this.x=l,this.y=f,this.width=C,this.height=g,this.facing="D",this.moving=!1,this.movingTicks=0,this.animU=new Anim([l1,x1,l1,E1],9,!0),this.animD=new Anim([h1,N1,h1,U1],9,!0),this.animL=new Anim([g1,b1,g1,M1],9,!0),this.animR=new Anim([A1,I1,A1,K1],9,!0)}updateAndDraw(){this.moving?this.movingTicks++:this.movingTicks=0;const l=this.facing=="U"?this.animU:this.facing=="D"?this.animD:this.facing=="L"?this.animL:this.animR;drawImage(this.x,this.y,this.width,this.height,l.getKeyFrame(this.movingTicks))}}let b,f1,p,M;function S1(){b=0,f1=new Y1(0,2,64,23),p=new Map([["U-P",new P(8,30,COL_BLU)],["U-JP",new P(14,30,COL_BLU)],["U-JR",new P(20,30,COL_BLU)],["D-P",new P(8,36,COL_RED)],["D-JP",new P(14,36,COL_RED)],["D-JR",new P(20,36,COL_RED)],["L-P",new P(8,42,COL_MAG)],["L-JP",new P(14,42,COL_MAG)],["L-JR",new P(20,42,COL_MAG)],["R-P",new P(8,48,COL_GRN)],["R-JP",new P(14,48,COL_GRN)],["R-JR",new P(20,48,COL_GRN)],["A-P",new P(8,54,COL_CYN)],["A-JP",new P(14,54,COL_CYN)],["A-JR",new P(20,54,COL_CYN)],["B-P",new P(8,60,COL_YEL)],["B-JP",new P(14,60,COL_YEL)],["B-JR",new P(20,60,COL_YEL)]]),M=new k1(39,36,14,18)}function F1(){b++,G1(),clearGfx(),f1.draw(),drawText(1,28,`U     ${peek(4096)}`,COL_BLU),drawText(1,34,`D     ${peek(4097)}`,COL_RED),drawText(1,40,`L     ${peek(4098)}`,COL_MAG),drawText(1,46,`R     ${peek(4099)}`,COL_GRN),drawText(1,52,`A     ${peek(4100)}`,COL_CYN),drawText(1,58,`B     ${peek(4101)}`,COL_YEL),p.forEach(i=>i.updateAndDraw());for(let i=29;i<63;i++)for(let l=28;l<63;l++)drawPixel(i,l,randomInt(0,1)==0?COL_BLK:COL_WHT);M.updateAndDraw()}function G1(){var i,l,f,C,g,L,_,k,R,y,v,X,W,D,O,S,F,B;isPressed(BTN_U)&&((i=p.get("U-P"))==null||i.trigger(1),M.facing="U"),isJustPressed(BTN_U)&&((l=p.get("U-JP"))==null||l.trigger(12)),isJustReleased(BTN_U)&&((f=p.get("U-JR"))==null||f.trigger(12)),isPressed(BTN_D)&&((C=p.get("D-P"))==null||C.trigger(1),M.facing="D"),isJustPressed(BTN_D)&&((g=p.get("D-JP"))==null||g.trigger(12)),isJustReleased(BTN_D)&&((L=p.get("D-JR"))==null||L.trigger(12)),isPressed(BTN_L)&&((_=p.get("L-P"))==null||_.trigger(1),M.facing="L"),isJustPressed(BTN_L)&&((k=p.get("L-JP"))==null||k.trigger(12)),isJustReleased(BTN_L)&&((R=p.get("L-JR"))==null||R.trigger(12)),isPressed(BTN_R)&&((y=p.get("R-P"))==null||y.trigger(1),M.facing="R"),isJustPressed(BTN_R)&&((v=p.get("R-JP"))==null||v.trigger(12)),isJustReleased(BTN_R)&&((X=p.get("R-JR"))==null||X.trigger(12)),isPressed(BTN_A)&&((W=p.get("A-P"))==null||W.trigger(1)),isJustPressed(BTN_A)&&((D=p.get("A-JP"))==null||D.trigger(12)),isJustReleased(BTN_A)&&((O=p.get("A-JR"))==null||O.trigger(12)),isPressed(BTN_B)&&((S=p.get("B-P"))==null||S.trigger(1)),isJustPressed(BTN_B)&&((F=p.get("B-JP"))==null||F.trigger(12)),isJustReleased(BTN_B)&&((B=p.get("B-JR"))==null||B.trigger(12)),M.moving=isPressed(BTN_U)||isPressed(BTN_D)||isPressed(BTN_L)||isPressed(BTN_R)}
