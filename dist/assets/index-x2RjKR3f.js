var T1=Object.defineProperty;var x1=(n,l,f)=>l in n?T1(n,l,{enumerable:!0,configurable:!0,writable:!0,value:f}):n[l]=f;var A=(n,l,f)=>(x1(n,typeof l!="symbol"?l+"":l,f),f);(function(){const l=document.createElement("link").relList;if(l&&l.supports&&l.supports("modulepreload"))return;for(const g of document.querySelectorAll('link[rel="modulepreload"]'))C(g);new MutationObserver(g=>{for(const L of g)if(L.type==="childList")for(const J of L.addedNodes)J.tagName==="LINK"&&J.rel==="modulepreload"&&C(J)}).observe(document,{childList:!0,subtree:!0});function f(g){const L={};return g.integrity&&(L.integrity=g.integrity),g.referrerPolicy&&(L.referrerPolicy=g.referrerPolicy),g.crossOrigin==="use-credentials"?L.credentials="include":g.crossOrigin==="anonymous"?L.credentials="omit":L.credentials="same-origin",L}function C(g){if(g.ep)return;g.ep=!0;const L=f(g);fetch(g.href,L)}})();(function(n){let l,f;function C(){f.frequency.value=0}function g(){l.resume()}const L=1,J=2,k=4,S=[],R=64,y=64,_=[{id:"U",index:12,physicalButtonPressed:!1,pressedPrevious:!1,pressedCurrent:!1,isPressed:!1,isJustPressed:!1,isJustReleased:!1},{id:"D",index:13,physicalButtonPressed:!1,pressedPrevious:!1,pressedCurrent:!1,isPressed:!1,isJustPressed:!1,isJustReleased:!1},{id:"L",index:14,physicalButtonPressed:!1,pressedPrevious:!1,pressedCurrent:!1,isPressed:!1,isJustPressed:!1,isJustReleased:!1},{id:"R",index:15,physicalButtonPressed:!1,pressedPrevious:!1,pressedCurrent:!1,isPressed:!1,isJustPressed:!1,isJustReleased:!1},{id:"A",index:0,physicalButtonPressed:!1,pressedPrevious:!1,pressedCurrent:!1,isPressed:!1,isJustPressed:!1,isJustReleased:!1},{id:"B",index:1,physicalButtonPressed:!1,pressedPrevious:!1,pressedCurrent:!1,isPressed:!1,isJustPressed:!1,isJustReleased:!1}],W=()=>{for(const e of _)e.physicalButtonPressed=!1},V=(e,s)=>s>e.buttons.length-1?null:e.buttons[s],v=[{id:"U",x:13,y:78,width:9,height:9,pressedPrevious:!1,pressedCurrent:!1,isPressed:!1,isJustPressed:!1,isJustReleased:!1},{id:"D",x:13,y:98,width:9,height:9,pressedPrevious:!1,pressedCurrent:!1,isPressed:!1,isJustPressed:!1,isJustReleased:!1},{id:"L",x:3,y:88,width:9,height:9,pressedPrevious:!1,pressedCurrent:!1,isPressed:!1,isJustPressed:!1,isJustReleased:!1},{id:"R",x:23,y:88,width:9,height:9,pressedPrevious:!1,pressedCurrent:!1,isPressed:!1,isJustPressed:!1,isJustReleased:!1},{id:"A",x:42,y:88,width:12,height:12,pressedPrevious:!1,pressedCurrent:!1,isPressed:!1,isJustPressed:!1,isJustReleased:!1},{id:"B",x:57,y:79,width:12,height:12,pressedPrevious:!1,pressedCurrent:!1,isPressed:!1,isJustPressed:!1,isJustReleased:!1}];let D,F,G;const E=new Map,w1=(e,s)=>!![...e.values()].includes(s),m1=e=>t1(e.pageX,e.pageY,-1),P1=e=>i1(e.pageX,e.pageY,-1),L1=e=>r1(e.pageX,e.pageY,-1),C1=e=>{for(const s of e.changedTouches)t1(s.pageX,s.pageY,s.identifier)},R1=e=>{e.preventDefault();for(const s of e.changedTouches)i1(s.pageX,s.pageY,s.identifier)},y1=e=>{e.preventDefault();for(const s of e.changedTouches)r1(s.pageX,s.pageY,s.identifier)},t1=(e,s,r)=>{const t=n1(e,s),i=o1(t.x,t.y);i==null?E.set(`${r}`,"-"):E.set(`${r}`,i.id)},i1=(e,s,r)=>{if(E.get(`${r}`)){const t=n1(e,s),i=o1(t.x,t.y);i==null?E.set(`${r}`,"-"):E.set(`${r}`,i.id)}},r1=(e,s,r)=>E.delete(`${r}`),n1=(e,s)=>{if(screen!=null)return{x:Math.round(((e-D.offsetLeft)/D.clientWidth+.5)*F),y:Math.round(((s-D.offsetTop)/D.clientHeight+.5)*G)}},o1=(e,s)=>{for(let r=0;r<v.length;r++){const t=v[r];if(e>=t.x&&e<=t.x+t.width&&s>=t.y&&s<=t.y+t.height)return t}return null},I=[{id:"U",codes:["ArrowUp","KeyW"],physicalKeyDown:!1,pressedPrevious:!1,pressedCurrent:!1,isPressed:!1,isJustPressed:!1,isJustReleased:!1},{id:"D",codes:["ArrowDown","KeyS"],physicalKeyDown:!1,pressedPrevious:!1,pressedCurrent:!1,isPressed:!1,isJustPressed:!1,isJustReleased:!1},{id:"L",codes:["ArrowLeft","KeyA"],physicalKeyDown:!1,pressedPrevious:!1,pressedCurrent:!1,isPressed:!1,isJustPressed:!1,isJustReleased:!1},{id:"R",codes:["ArrowRight","KeyD"],physicalKeyDown:!1,pressedPrevious:!1,pressedCurrent:!1,isPressed:!1,isJustPressed:!1,isJustReleased:!1},{id:"A",codes:["KeyZ","Period"],physicalKeyDown:!1,pressedPrevious:!1,pressedCurrent:!1,isPressed:!1,isJustPressed:!1,isJustReleased:!1},{id:"B",codes:["KeyX","Slash"],physicalKeyDown:!1,pressedPrevious:!1,pressedCurrent:!1,isPressed:!1,isJustPressed:!1,isJustReleased:!1}],B1=e=>{e.code!=="F1"&&e.code!=="F3"&&e.code!=="F6"&&e.code!=="F7"&&e.code!=="Tab"&&e.code!=="AltLeft"&&e.code!=="AltRight"&&e.code!=="ArrowRight"&&e.code!=="ArrowDown"&&e.code!=="ArrowLeft"&&e.code!=="ArrowUp"||e.preventDefault();const s=d1(e.code);s!=null&&(s.physicalKeyDown=!0)},J1=e=>{const s=d1(e.code);s!=null&&(s.physicalKeyDown=!1)},d1=e=>{for(let s=0;s<I.length;s++){const r=I[s];if(r.codes.includes(e))return r}return null},N=0,$=4096,U=4102,z=4104,Z=4104,e1=[];function B(e){if(e<0||e>Z)throw`Invalid address: peek ${e}`;return e1[e]}function T(e,s){if(e<0||e>Z)throw`Invalid address: poke ${e}`;e1[e]=s}const _1={charWidth:3,charHeight:5,charTrackingDefault:1,charMap:[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,1,0,0,1,0,0,1,0,0,0,0,0,1,0],[1,0,1,1,0,1,0,0,0,0,0,0,0,0,0],[1,0,1,1,1,1,1,0,1,1,1,1,1,0,1],[0,1,0,1,1,1,1,0,0,1,1,1,0,1,0],[1,0,1,0,0,1,0,1,0,1,0,0,1,0,1],[1,1,0,1,1,0,1,1,1,1,0,1,0,1,1],[0,1,0,0,1,0,0,0,0,0,0,0,0,0,0],[0,0,1,0,1,0,0,1,0,0,1,0,0,0,1],[1,0,0,0,1,0,0,1,0,0,1,0,1,0,0],[0,0,0,1,0,1,0,1,0,1,0,1,0,0,0],[0,0,0,0,1,0,1,1,1,0,1,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,1,0,1,0,0],[0,0,0,0,0,0,1,1,1,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,1,0],[0,0,1,0,0,1,0,1,0,1,0,0,1,0,0],[1,1,1,1,0,1,1,0,1,1,0,1,1,1,1],[0,1,0,1,1,0,0,1,0,0,1,0,1,1,1],[1,1,1,0,0,1,1,1,1,1,0,0,1,1,1],[1,1,1,0,0,1,0,1,1,0,0,1,1,1,1],[1,0,1,1,0,1,1,1,1,0,0,1,0,0,1],[1,1,1,1,0,0,1,1,1,0,0,1,1,1,1],[1,1,1,1,0,0,1,1,1,1,0,1,1,1,1],[1,1,1,0,0,1,0,0,1,0,0,1,0,0,1],[1,1,1,1,0,1,1,1,1,1,0,1,1,1,1],[1,1,1,1,0,1,1,1,1,0,0,1,1,1,1],[0,0,0,0,1,0,0,0,0,0,1,0,0,0,0],[0,0,0,0,1,0,0,0,0,0,1,0,1,0,0],[0,0,1,0,1,0,1,0,0,0,1,0,0,0,1],[0,0,0,1,1,1,0,0,0,1,1,1,0,0,0],[1,0,0,0,1,0,0,0,1,0,1,0,1,0,0],[1,1,1,0,0,1,0,1,0,0,0,0,0,1,0],[1,1,1,1,0,1,1,0,1,1,0,0,1,1,1],[1,1,1,1,0,1,1,1,1,1,0,1,1,0,1],[1,1,1,1,0,1,1,1,0,1,0,1,1,1,1],[1,1,1,1,0,0,1,0,0,1,0,0,1,1,1],[1,1,0,1,0,1,1,0,1,1,0,1,1,1,0],[1,1,1,1,0,0,1,1,0,1,0,0,1,1,1],[1,1,1,1,0,0,1,1,0,1,0,0,1,0,0],[1,1,1,1,0,0,1,0,1,1,0,1,1,1,1],[1,0,1,1,0,1,1,1,1,1,0,1,1,0,1],[1,1,1,0,1,0,0,1,0,0,1,0,1,1,1],[0,0,1,0,0,1,0,0,1,1,0,1,1,1,1],[1,0,1,1,0,1,1,1,0,1,0,1,1,0,1],[1,0,0,1,0,0,1,0,0,1,0,0,1,1,1],[1,0,1,1,1,1,1,0,1,1,0,1,1,0,1],[1,0,1,1,1,1,1,1,1,1,0,1,1,0,1],[1,1,1,1,0,1,1,0,1,1,0,1,1,1,1],[1,1,1,1,0,1,1,1,1,1,0,0,1,0,0],[1,1,1,1,0,1,1,0,1,1,1,1,0,0,1],[1,1,1,1,0,1,1,1,0,1,0,1,1,0,1],[1,1,1,1,0,0,1,1,1,0,0,1,1,1,1],[1,1,1,0,1,0,0,1,0,0,1,0,0,1,0],[1,0,1,1,0,1,1,0,1,1,0,1,1,1,1],[1,0,1,1,0,1,1,0,1,1,0,1,0,1,0],[1,0,1,1,0,1,1,0,1,1,1,1,1,0,1],[1,0,1,1,0,1,0,1,0,1,0,1,1,0,1],[1,0,1,1,0,1,0,1,0,0,1,0,0,1,0],[1,1,1,0,0,1,0,1,0,1,0,0,1,1,1],[0,1,1,0,1,0,0,1,0,0,1,0,0,1,1],[1,0,0,1,0,0,0,1,0,0,0,1,0,0,1],[1,1,0,0,1,0,0,1,0,0,1,0,1,1,0],[0,1,0,1,0,1,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,1,1,1],[1,0,0,0,1,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,1,1,1,1,1,1,1,1],[0,0,0,1,0,0,1,1,1,1,0,1,1,1,1],[0,0,0,0,0,0,1,1,1,1,0,0,1,1,1],[0,0,0,0,0,1,1,1,1,1,0,1,1,1,1],[0,0,0,0,0,0,1,1,0,1,1,0,1,1,1],[0,0,0,0,1,1,0,1,0,1,1,1,0,1,0],[0,0,0,1,1,1,1,1,1,0,0,1,1,1,1],[0,0,0,1,0,0,1,1,1,1,0,1,1,0,1],[0,0,0,0,1,0,0,0,0,0,1,0,0,1,0],[0,0,0,0,1,0,0,0,0,0,1,0,1,1,0],[0,0,0,1,0,0,1,0,1,1,1,0,1,0,1],[0,0,0,0,1,0,0,1,0,0,1,0,0,1,1],[0,0,0,0,0,0,1,1,1,1,1,1,1,0,1],[0,0,0,0,0,0,1,1,1,1,0,1,1,0,1],[0,0,0,0,0,0,1,1,1,1,0,1,1,1,1],[0,0,0,1,1,1,1,0,1,1,1,1,1,0,0],[0,0,0,1,1,1,1,0,1,1,1,1,0,0,1],[0,0,0,0,0,0,1,1,1,1,0,0,1,0,0],[0,0,0,0,0,0,0,1,1,0,1,0,1,1,0],[0,0,0,0,1,0,1,1,1,0,1,0,0,1,1],[0,0,0,0,0,0,1,0,1,1,0,1,1,1,1],[0,0,0,0,0,0,1,0,1,1,0,1,0,1,0],[0,0,0,0,0,0,1,0,1,1,1,1,1,1,1],[0,0,0,0,0,0,1,0,1,0,1,0,1,0,1],[0,0,0,1,0,1,1,1,1,0,0,1,1,1,0],[0,0,0,1,1,1,0,1,0,0,0,1,1,1,0],[0,1,1,0,1,0,1,0,0,0,1,0,0,1,1],[0,1,0,0,1,0,0,1,0,0,1,0,0,1,0],[1,1,0,0,1,0,0,0,1,0,1,0,1,1,0],[0,0,0,0,0,0,0,1,1,1,1,0,0,0,0]]};function X(e,s,r,t){if(e>s){const i=e;e=s,s=i}for(let i=e;i<=s;i++)w(i,r,t)}function w(e,s,r){e<0||e>=R||s<0||s>=y||T(N+(0|e)+(0|s)*R,r)}function v1(e,s,r,t,i){const o=s.charMap[e.charCodeAt(0)-32];for(let d=0;d<s.charWidth;d++)for(let c=0;c<s.charHeight;c++)o[d+c*s.charWidth]===1&&w(r+d,t+c,i)}let O,x,K,Q;const j=[60,60,60,60,60],H=72,q=128,a1=4,u1=4;function c1(e){const s=e-Q;if(Math.ceil(s)>1e3/60){j.shift(),j.push(Math.round(1e3/s));const r=Math.round(j.reduce((t,i)=>t+i)/j.length);Q=e,T(z,r),function(){for(const t of I)t.pressedPrevious=t.pressedCurrent,t.pressedCurrent=t.physicalKeyDown,t.isPressed=t.pressedCurrent,t.isJustPressed=t.pressedCurrent&&!t.pressedPrevious,t.isJustReleased=!t.pressedCurrent&&t.pressedPrevious}(),function(){const t=navigator.getGamepads()[0];if(t)for(const i of _){const o=V(t,i.index);o!=null&&(o.pressed?i.physicalButtonPressed=!0:i.physicalButtonPressed=!1)}for(const i of _)i.pressedPrevious=i.pressedCurrent,i.pressedCurrent=i.physicalButtonPressed,i.isPressed=i.pressedCurrent,i.isJustPressed=i.pressedCurrent&&!i.pressedPrevious,i.isJustReleased=!i.pressedCurrent&&i.pressedPrevious}(),function(){for(const t of v)t.pressedPrevious=t.pressedCurrent,t.pressedCurrent=w1(E,t.id),t.isPressed=t.pressedCurrent,t.isJustPressed=t.pressedCurrent&&!t.pressedPrevious,t.isJustReleased=!t.pressedCurrent&&t.pressedPrevious}(),function(){for(let t=0;t<6;t++){let i=0;(I[t].isPressed||_[t].isPressed||v[t].isPressed)&&(i|=L),(I[t].isJustPressed||_[t].isJustPressed||v[t].isJustPressed)&&(i|=J),(I[t].isJustReleased||_[t].isJustReleased||v[t].isJustReleased)&&(i|=k),T($+t,i)}}(),function(){const t=B(U),i=B(U+1);t>0&&i>0?function(o){f.frequency.value=o}(t):C(),i>0&&T(U+1,i-1)}(),romLoop(),function(){for(let t=N;t<N+R*y;t++){const i=S[B(t)];K.data[4*t+0]=i.r,K.data[4*t+1]=i.g,K.data[4*t+2]=i.b,K.data[4*t+3]=255}x.putImageData(K,a1,u1)}()}window.requestAnimationFrame(c1)}window.addEventListener("load",function(){(function(){for(let e=0;e<=Z;e++)e1.push(0)})(),l=new window.AudioContext,f=l.createOscillator(),f.type="square",f.frequency.value=0,f.connect(l.destination),f.start(0),window.addEventListener("mousedown",g),window.addEventListener("touchstart",g),window.addEventListener("keydown",g),document.addEventListener("visibilitychange",()=>{document.visibilityState==="hidden"&&C()}),document.addEventListener("keydown",B1),document.addEventListener("keyup",J1),function(){const e="-webkit-touch-callout: none; -webkit-tap-highlight-color: #000; -webkit-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none; background: #000; color: #888;",s="position: absolute; left: 50%; top: 50%; transform: translate(-50%, -50%); background: #000};",r="image-rendering: -moz-crisp-edges; image-rendering: -webkit-optimize-contrast; image-rendering: -o-crisp-edges; image-rendering: pixelated;";document.body.style.cssText=e,O=document.createElement("canvas"),O.width=H,O.height=q,x=O.getContext("2d",{alpha:!1}),x.imageSmoothingEnabled=!1,O.style.cssText=s+r,x.fillStyle="#ddd",x.fillRect(0,0,H,q),x.fillStyle="#333",x.fillRect(a1-1,u1-1,R+2,y+2);const t=()=>{const i=innerWidth/innerHeight,o=H/q,d=i<o,c=d?innerWidth:innerHeight*o,u=d?innerWidth/o:innerHeight;O.style.width=`${c}px`,O.style.height=`${u}px`};window.addEventListener("resize",t),t(),document.body.appendChild(O),K=x.createImageData(R,y)}(),window.addEventListener("gamepaddisconnected",W),function(e,s,r){D=e,F=s,G=r;const t=D.getContext("2d");t.fillRect(13,78,9,29),t.fillRect(3,88,29,9);const i=new Image;i.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABcAAAAFAQMAAACU+uVzAAAABlBMVEUAAAAzM2bT8ENbAAAAAXRSTlMAQObYZgAAABtJREFUCNdjePdKj6GjS4PhxDsgvWgRQ9+jdwBZWAlP4hlWSwAAAABJRU5ErkJggg==",i.onload=()=>{t.drawImage(i,6,71)};const o=new Image;o.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMAQMAAABsu86kAAAABlBMVEUAAACZADPodVumAAAAAXRSTlMAQObYZgAAABxJREFUCNdj4GdgsD/AUP8AhP5/gCOICFAKqAAAEwUPVSVDKX4AAAAASUVORK5CYII=",o.onload=()=>{t.drawImage(o,42,88),t.drawImage(o,57,79)};const d=new Image;d.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAAFAQMAAABYY9+YAAAABlBMVEUAAAAzM2bT8ENbAAAAAXRSTlMAQObYZgAAABFJREFUCNdjSGCYwPABiCcAAA5KAwFW2JXuAAAAAElFTkSuQmCC",d.onload=()=>{t.drawImage(d,46,101)};const c=new Image;c.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAAFAQMAAABYY9+YAAAABlBMVEUAAAAzM2bT8ENbAAAAAXRSTlMAQObYZgAAAA1JREFUCNdjeMAwAYIBEsoDwUh7niQAAAAASUVORK5CYII=",c.onload=()=>{t.drawImage(c,61,92)},document.addEventListener("mousedown",m1),document.addEventListener("mousemove",P1),document.addEventListener("mouseup",L1),document.addEventListener("touchstart",C1),document.addEventListener("touchmove",R1,{passive:!1}),document.addEventListener("touchend",y1,{passive:!1})}(O,H,q),romInit(),function(e){for(let s=0;s<=7;s++){const r=e[s],t=(16711680&r)>>16,i=(65280&r)>>8,o=255&r;S.push({r:t,g:i,b:o})}}(window.romPalette),Q=performance.now(),c1(Q)}),window.romPalette=[0,255,16711680,16711935,65280,65535,16776960,16777215],n.ADDRESS_AUD=U,n.ADDRESS_BTN=$,n.ADDRESS_FPS=z,n.ADDRESS_GFX=N,n.Anim=class{constructor(e,s,r){this.frames=e,this.frameTicks=s,this.looping=r}getKeyFrame(e){if(this.frames.length===1)return this.frames[0];let s=Math.floor(e/this.frameTicks);return this.looping?s%=this.frames.length:s=Math.min(this.frames.length-1,s),this.frames[s]}isFinished(e){return!this.looping&&e>=this.frames.length*this.frameTicks}},n.BTN_A=4,n.BTN_B=5,n.BTN_D=1,n.BTN_L=2,n.BTN_R=3,n.BTN_U=0,n.COL_BLK=0,n.COL_BLU=1,n.COL_CYN=5,n.COL_GRN=4,n.COL_MAG=3,n.COL_RED=2,n.COL_WHT=7,n.COL_YEL=6,n.GFX_H=y,n.GFX_W=R,n.Rect=class{constructor(e,s,r,t){this.x=e,this.y=s,this.width=r,this.height=t}overlaps(e){return this.x<e.x+e.width&&this.x+this.width>e.x&&this.y<e.y+e.height&&this.y+this.height>e.y}},n.Vec2=class{constructor(e,s){this.x=e,this.y=s}set(e,s){this.x=e,this.y=s}add(e,s){this.x+=e,this.y+=s}scl(e){this.x*=e,this.y*=e}equals(e){return this.x==e.x&&this.y==e.y}},n.beep=function(e,s,r){(B(U+1)<=0||r)&&(T(U,Math.floor(e)),T(U+1,Math.floor(s)))},n.clamp=function(e,s,r){return Math.max(s,Math.min(e,r))},n.clearGfx=function(e){for(let s=N;s<N+R*y;s++)T(s,e>0?e:0)},n.drawCircle=function(e,s,r,t,i){i>=0&&function(o,d,c,u){let a=0,h=c,m=1-c;for(;a<=h;)X(o-a,o+a,d-h,u),X(o-h,o+h,d-a,u),X(o-h,o+h,d+a,u),X(o-a,o+a,d+h,u),m<0?m+=2*a+1:(m+=2*(a-h)+1,h--),a++}(e,s,r,i),function(o,d,c,u){let a=0,h=c,m=1-c;for(;a<=h;)w(o+a,d+h,u),w(o+a,d-h,u),w(o-a,d+h,u),w(o-a,d-h,u),w(o+h,d+a,u),w(o+h,d-a,u),w(o-h,d+a,u),w(o-h,d-a,u),m<0?m+=2*a+1:(m+=2*(a-h)+1,h--),a++}(e,s,r,t)},n.drawImage=function(e,s,r,t,i,o){const d=[...i];if(o){const c=[];for(;d.length;)c.push(d.splice(0,r));if(o.flipX)for(let u=0;u<t;u++)c[u].reverse();o.flipY&&c.reverse();for(let u=0;u<t;u++)for(let a=0;a<r;a++)d[u*r+a]=c[u][a]}for(let c=0;c<t;c++)for(let u=0;u<r;u++){const a=d[u+c*r];a>=0&&w(e+u,s+c,a)}},n.drawLine=function(e,s,r,t,i){e===r?function(o,d,c,u){if(d>c){const a=d;d=c,c=a}for(let a=d;a<=c;a++)w(o,a,u)}(e,s,t,i):s===t?X(e,r,s,i):function(o,d,c,u,a){const h=Math.abs(c-o),m=Math.abs(u-d),D1=o<c?1:-1,O1=d<u?1:-1;let s1=h-m;for(w(o,d,a),w(c,u,a);o!==c&&d!==u;){const l1=s1<<1;l1>-m&&(s1-=m,o+=D1),l1<h&&(s1+=h,d+=O1),w(o,d,a)}}(e,s,r,t,i)},n.drawPattern=function(e,s,r,t){for(let i=0;i<r.length;i+=2)w(e+r[i],s+r[i+1],t)},n.drawPixel=w,n.drawRectangle=function(e,s,r,t,i,o){let d=0,c=0,u=0,a=0;r<0?(d=e+r+1,u=e):(d=e,u=e+r-1),t<0?(c=s+t+1,a=s):(c=s,a=s+t-1);for(let h=d;h<=u;h++)for(let m=c;m<=a;m++)h==d||h==u||m==c||m==a?w(h,m,i):o>=0&&w(h,m,o)},n.drawText=function(e,s,r,t,i){const o=i!=null&&i.font?i.font:_1,d=(i==null?void 0:i.tracking)>=0?i.tracking:o.charTrackingDefault;let c=e;for(let u=0;u<r.length;u++)v1(r.charAt(u),o,c,s,t),c+=o.charWidth+d},n.fc64Init=function(e,s,r){window.romInit=e,window.romLoop=s,r&&(window.romPalette=r)},n.getFps=function(){return B(z)},n.getPixel=function(e,s){return e<0||e>=R||s<0||s>=y?-1:B(N+(0|e)+(0|s)*R)},n.isEmptyObject=function(e){return Object.keys(e).length===0&&e.constructor===Object},n.isJustPressed=function(e){return!!(B($+e)&J)},n.isJustReleased=function(e){return!!(B($+e)&k)},n.isPressed=function(e){return!!(B($+e)&L)},n.peek=B,n.poke=T,n.randomInt=function(e,s){return Math.floor(Math.random()*(s-e+1)+e)},n.swapImageColors=function(e,s,r){if(s.length!=r.length)throw new Error("mismatched old/new list lengths");const t=[...e];for(let i=0;i<s.length;i++)for(let o=0;o<e.length;o++)e[o]===s[i]&&(t[o]=r[i]);return t},n.wrap=function(e,s,r){const t=r-s;return s+((e-s)%t+t)%t}})(window||{});const Y=[-1,0,0,0,0,0,0,0,0,-1,-1,-1,0,0,0,0,0,0,0,-1,-1,-1,-1,0,0,0,0,0,0,0,0,-1,-1,0,0,0,-1,-1,-1,0,0,0,-1,-1,-1,-1,-1,-1,-1,-1,0,0,0,-1,-1,-1,0,0,0,0,0,0,0,0,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,0,0,0,0,0,0,0,0,-1,-1,0,0,0,0,0,0,0,0,0,-1,-1,0,0,0,0,0,0,0,0,0,-1,-1,0,0,0,-1,-1,-1,0,0,0,-1,-1,-1,-1,-1,-1,-1,-1,0,0,0,-1,-1,0,0,0,0,0,0,0,0,0,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,0,0,0,0,0,0,0,0,-1,-1,0,0,0,0,0,0,0,0,0,-1,-1,0,0,0,0,0,0,0,0,0,-1,-1,0,0,0,-1,-1,-1,0,0,0,-1,-1,-1,-1,-1,-1,-1,-1,0,0,0,-1,-1,0,0,0,0,0,0,0,0,0,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,0,0,-1,-1,-1,-1,-1,-1,-1,-1,0,0,0,-1,-1,-1,0,0,0,-1,-1,0,0,0,-1,-1,-1,-1,-1,-1,-1,-1,0,0,0,-1,-1,-1,0,0,0,-1,-1,-1,-1,-1,-1,-1,-1,0,0,0,-1,-1,0,0,0,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,0,0,0,0,0,-1,-1,-1,-1,-1,0,0,0,-1,-1,-1,-1,-1,-1,-1,-1,0,0,0,0,0,0,0,0,-1,-1,-1,0,0,0,0,0,0,0,0,0,-1,-1,-1,-1,-1,-1,-1,-1,0,0,0,-1,-1,0,0,0,0,0,0,0,0,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,0,0,0,0,0,-1,-1,-1,-1,-1,0,0,0,-1,-1,-1,-1,-1,-1,-1,-1,0,0,0,0,0,0,0,0,0,-1,-1,0,0,0,0,0,0,0,0,0,-1,-1,-1,-1,-1,-1,-1,-1,0,0,0,-1,-1,0,0,0,0,0,0,0,0,0,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,0,0,0,0,0,-1,-1,-1,-1,-1,0,0,0,-1,-1,-1,-1,-1,-1,-1,-1,0,0,0,0,0,0,0,0,0,-1,-1,-1,0,0,0,0,0,0,0,0,-1,-1,-1,-1,-1,-1,-1,-1,0,0,0,-1,-1,-1,0,0,0,0,0,0,0,0,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,0,0,-1,-1,-1,-1,-1,-1,-1,-1,0,0,0,-1,-1,-1,-1,-1,-1,-1,-1,0,0,0,-1,-1,-1,0,0,0,-1,-1,-1,-1,-1,-1,-1,-1,0,0,0,-1,-1,0,0,0,-1,-1,-1,0,0,0,-1,-1,-1,-1,-1,-1,-1,-1,0,0,0,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,0,0,-1,-1,-1,-1,-1,-1,-1,-1,0,0,0,-1,-1,-1,0,0,0,-1,-1,0,0,0,-1,-1,-1,0,0,0,-1,-1,-1,-1,-1,-1,-1,-1,0,0,0,-1,-1,0,0,0,-1,-1,-1,0,0,0,-1,-1,-1,-1,-1,-1,-1,-1,0,0,0,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,0,0,-1,-1,-1,-1,-1,-1,-1,-1,0,0,0,0,0,0,0,0,0,-1,-1,0,0,0,0,0,0,0,0,0,-1,-1,-1,-1,-1,-1,-1,-1,0,0,0,-1,-1,0,0,0,0,0,0,0,0,0,-1,-1,0,0,0,0,0,0,0,0,0,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,0,0,-1,-1,-1,-1,-1,-1,-1,-1,0,0,0,0,0,0,0,0,0,-1,-1,0,0,0,0,0,0,0,0,0,-1,-1,-1,-1,-1,-1,-1,-1,0,0,0,-1,-1,0,0,0,0,0,0,0,0,0,-1,-1,0,0,0,0,0,0,0,0,0,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,0,0,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,0,0,0,0,0,0,-1,-1,-1,-1,0,0,0,0,0,0,0,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,0,0,-1,-1,-1,0,0,0,0,0,0,0,-1,-1,-1,0,0,0,0,0,0,0,0,-1],h1=[-1,-1,-1,-1,-1,0,0,0,0,-1,-1,-1,-1,-1,-1,-1,-1,0,0,6,6,6,6,0,0,-1,-1,-1,-1,-1,0,6,6,6,6,6,6,6,6,0,-1,-1,-1,-1,0,6,6,6,6,6,6,6,6,0,-1,-1,-1,0,6,6,6,6,6,6,6,6,6,6,0,-1,-1,0,6,6,6,6,6,6,6,6,6,6,0,-1,-1,0,6,6,6,6,6,6,6,6,6,6,0,-1,-1,-1,0,3,6,6,6,6,6,6,3,0,-1,-1,-1,-1,-1,0,3,3,6,6,3,3,0,-1,-1,-1,-1,-1,0,4,0,3,3,3,3,0,4,0,-1,-1,-1,0,0,4,4,0,0,0,0,4,4,0,0,-1,0,3,0,4,4,4,4,4,4,4,4,0,3,0,0,3,0,0,4,4,4,4,4,4,0,0,3,0,-1,0,0,1,0,0,0,0,0,0,1,0,0,-1,-1,-1,0,1,1,1,1,1,1,1,1,0,-1,-1,-1,-1,0,1,1,1,0,0,1,1,1,0,-1,-1,-1,-1,0,5,5,5,0,0,5,5,5,0,-1,-1,-1,-1,-1,0,0,0,-1,-1,0,0,0,-1,-1,-1],E1=[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,0,0,0,-1,-1,-1,-1,-1,-1,-1,-1,0,0,6,6,6,6,0,0,-1,-1,-1,-1,-1,0,6,6,6,6,6,6,6,6,0,-1,-1,-1,-1,0,6,6,6,6,6,6,6,6,0,-1,-1,-1,0,6,6,6,6,6,6,6,6,6,6,0,-1,-1,0,6,6,6,6,6,6,6,6,6,6,0,-1,-1,0,6,6,6,6,6,6,6,6,6,6,0,-1,-1,-1,0,3,6,6,6,6,6,6,3,0,3,0,-1,-1,-1,0,3,3,6,6,3,3,0,3,3,0,-1,-1,0,4,0,3,3,3,3,0,4,0,0,-1,-1,-1,0,0,4,0,0,0,0,4,4,0,-1,-1,-1,0,3,3,0,4,4,4,4,4,0,0,-1,-1,-1,0,3,3,0,0,0,0,0,0,1,0,-1,-1,-1,-1,0,0,1,1,1,1,1,1,1,0,-1,-1,-1,-1,-1,-1,0,0,0,0,1,1,1,0,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,5,5,5,0,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,0,0,-1,-1,-1],N1=[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,0,0,0,-1,-1,-1,-1,-1,-1,-1,-1,0,0,6,6,6,6,0,0,-1,-1,-1,-1,-1,0,6,6,6,6,6,6,6,6,0,-1,-1,-1,-1,0,6,6,6,6,6,6,6,6,0,-1,-1,-1,0,6,6,6,6,6,6,6,6,6,6,0,-1,-1,0,6,6,6,6,6,6,6,6,6,6,0,-1,-1,0,6,6,6,6,6,6,6,6,6,6,0,-1,0,3,0,3,6,6,6,6,6,6,3,0,-1,-1,0,3,3,0,3,3,6,6,3,3,0,-1,-1,-1,-1,0,0,4,0,3,3,3,3,0,4,0,-1,-1,-1,-1,0,4,4,0,0,0,0,4,0,0,-1,-1,-1,-1,0,0,4,4,4,4,4,0,3,3,0,-1,-1,-1,0,1,0,0,0,0,0,0,3,3,0,-1,-1,-1,0,1,1,1,1,1,1,1,0,0,-1,-1,-1,-1,0,1,1,1,0,0,0,0,-1,-1,-1,-1,-1,-1,0,5,5,5,0,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,0,0,-1,-1,-1,-1,-1,-1,-1,-1],g1=[-1,-1,-1,-1,-1,0,0,0,0,-1,-1,-1,-1,-1,-1,-1,-1,0,0,6,6,6,6,0,0,-1,-1,-1,-1,-1,0,6,6,6,6,6,6,6,6,0,-1,-1,-1,-1,0,6,6,6,6,6,6,6,6,0,-1,-1,-1,0,6,3,6,6,6,6,6,6,6,6,0,-1,-1,0,3,3,3,3,6,6,6,6,6,3,0,-1,-1,0,3,3,3,3,3,3,3,3,3,3,0,-1,-1,-1,0,3,3,0,3,3,0,3,3,0,-1,-1,-1,-1,-1,0,3,0,3,3,0,3,0,-1,-1,-1,-1,-1,0,4,0,3,3,3,3,0,4,0,-1,-1,-1,0,3,4,4,0,0,0,0,4,4,3,0,-1,0,3,3,0,4,4,4,4,4,4,0,3,3,0,0,3,3,0,4,4,4,4,4,4,0,3,3,0,-1,0,0,1,0,0,0,0,0,0,1,0,0,-1,-1,-1,0,1,1,1,1,1,1,1,1,0,-1,-1,-1,-1,0,1,1,1,0,0,1,1,1,0,-1,-1,-1,-1,0,5,5,5,0,0,5,5,5,0,-1,-1,-1,-1,-1,0,0,0,-1,-1,0,0,0,-1,-1,-1],U1=[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,0,0,0,-1,-1,-1,-1,-1,-1,-1,-1,0,0,6,6,6,6,0,0,-1,-1,-1,-1,-1,0,6,6,6,6,6,6,6,6,0,-1,-1,-1,-1,0,6,6,6,6,6,6,6,6,0,-1,-1,-1,0,6,3,6,6,6,6,6,6,6,6,0,-1,-1,0,3,3,3,3,6,6,6,6,6,3,0,-1,-1,0,3,3,3,3,3,3,3,3,3,3,0,-1,-1,-1,0,3,3,0,3,3,0,3,3,0,0,-1,-1,-1,0,0,3,0,3,3,0,3,0,3,3,0,-1,0,3,0,0,3,3,3,3,0,4,0,3,0,-1,0,0,3,3,0,0,0,0,4,4,0,0,-1,-1,-1,0,3,3,0,4,4,4,0,0,0,-1,-1,-1,-1,0,0,0,0,0,0,0,1,1,0,-1,-1,-1,-1,0,1,1,1,1,0,1,1,1,0,-1,-1,-1,-1,-1,0,0,0,0,0,1,1,1,0,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,5,5,5,0,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,0,0,-1,-1,-1],b1=[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,0,0,0,-1,-1,-1,-1,-1,-1,-1,-1,0,0,6,6,6,6,0,0,-1,-1,-1,-1,-1,0,6,6,6,6,6,6,6,6,0,-1,-1,-1,-1,0,6,6,6,6,6,6,6,6,0,-1,-1,-1,0,6,3,6,6,6,6,6,6,6,6,0,-1,-1,0,3,3,3,3,6,6,6,6,6,3,0,-1,-1,0,3,3,3,3,3,3,3,3,3,3,0,-1,-1,0,0,3,3,0,3,3,0,3,3,0,-1,-1,0,3,3,0,3,0,3,3,0,3,0,0,-1,-1,0,3,0,4,0,3,3,3,3,0,0,3,0,-1,-1,0,0,4,4,0,0,0,0,3,3,0,0,-1,-1,-1,0,0,0,4,4,4,0,3,3,0,-1,-1,-1,-1,0,1,1,0,0,0,0,0,0,0,-1,-1,-1,-1,0,1,1,1,0,1,1,1,1,0,-1,-1,-1,-1,0,1,1,1,0,0,0,0,0,-1,-1,-1,-1,-1,0,5,5,5,0,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,0,0,-1,-1,-1,-1,-1,-1,-1,-1],A1=[-1,-1,-1,-1,-1,0,0,0,0,-1,-1,-1,-1,-1,-1,-1,-1,0,0,6,6,6,6,0,0,-1,-1,-1,-1,-1,0,6,6,6,6,6,6,6,6,0,-1,-1,-1,-1,0,6,6,6,6,6,6,6,6,0,-1,-1,-1,0,6,3,6,6,6,6,6,6,6,6,0,-1,-1,0,0,3,3,6,6,6,6,6,6,6,0,-1,-1,-1,0,3,0,3,6,6,3,6,6,6,0,-1,-1,-1,0,3,0,3,3,3,3,3,6,6,0,-1,-1,-1,0,0,3,3,3,3,3,3,3,0,0,-1,-1,-1,-1,0,0,3,3,3,3,3,0,0,-1,-1,-1,-1,-1,-1,0,0,0,0,0,0,0,-1,-1,-1,-1,-1,-1,-1,0,4,0,0,4,4,0,-1,-1,-1,-1,-1,-1,-1,0,0,3,3,0,4,0,-1,-1,-1,-1,-1,-1,-1,0,0,3,3,0,4,0,-1,-1,-1,-1,-1,-1,-1,0,1,0,0,1,0,0,-1,-1,-1,-1,-1,-1,-1,0,1,1,1,1,0,-1,-1,-1,-1,-1,-1,-1,-1,0,5,5,5,5,0,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,0,0,0,-1,-1,-1,-1,-1],M1=[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,0,0,0,-1,-1,-1,-1,-1,-1,-1,-1,0,0,6,6,6,6,0,0,-1,-1,-1,-1,-1,0,6,6,6,6,6,6,6,6,0,-1,-1,-1,-1,0,6,6,6,6,6,6,6,6,0,-1,-1,-1,0,6,3,6,6,6,6,6,6,6,6,0,-1,-1,-1,0,3,3,6,6,6,6,6,6,6,0,-1,-1,-1,0,3,0,3,6,6,3,6,6,6,0,-1,-1,-1,0,3,0,3,3,3,3,3,6,6,0,-1,-1,-1,-1,0,3,3,3,3,3,3,3,0,-1,-1,-1,-1,-1,0,0,3,3,3,3,0,0,-1,-1,-1,-1,-1,0,3,0,0,0,0,0,3,3,0,-1,-1,-1,-1,0,3,0,4,4,4,0,3,3,0,-1,-1,-1,-1,-1,0,0,4,4,4,4,0,0,-1,-1,-1,-1,-1,0,0,1,1,0,1,1,1,0,-1,-1,-1,-1,0,5,5,0,1,0,1,1,0,5,0,-1,-1,-1,-1,0,5,5,0,-1,0,0,5,5,0,-1,-1,-1,-1,-1,0,0,-1,-1,-1,-1,0,0,-1,-1,-1],I1=[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,0,0,0,-1,-1,-1,-1,-1,-1,-1,-1,0,0,6,6,6,6,0,0,-1,-1,-1,-1,-1,0,6,6,6,6,6,6,6,6,0,-1,-1,-1,-1,0,6,6,6,6,6,6,6,6,0,-1,-1,-1,0,6,3,6,6,6,6,6,6,6,6,0,-1,-1,-1,0,3,3,6,6,6,6,6,6,6,0,-1,-1,-1,0,3,0,3,6,6,3,6,6,6,0,-1,-1,-1,0,3,0,3,3,3,3,3,6,6,0,-1,-1,-1,-1,0,3,3,3,3,3,3,3,0,-1,-1,-1,-1,-1,0,0,3,3,3,3,0,0,-1,-1,-1,-1,-1,0,3,3,0,0,0,0,0,3,0,-1,-1,-1,-1,0,3,3,0,4,4,4,0,3,0,-1,-1,-1,-1,-1,0,0,4,4,4,4,0,0,-1,-1,-1,-1,-1,0,0,1,1,0,1,1,1,0,-1,-1,-1,-1,0,5,5,0,1,0,1,1,0,5,0,-1,-1,-1,-1,0,5,5,0,-1,0,0,5,5,0,-1,-1,-1,-1,-1,0,0,-1,-1,-1,-1,0,0,-1,-1,-1],f1=[-1,-1,-1,-1,-1,0,0,0,0,-1,-1,-1,-1,-1,-1,-1,-1,0,0,6,6,6,6,0,0,-1,-1,-1,-1,-1,0,6,6,6,6,6,6,6,6,0,-1,-1,-1,-1,0,6,6,6,6,6,6,6,6,0,-1,-1,-1,0,6,6,6,6,6,6,6,6,3,6,0,-1,-1,0,6,6,6,6,6,6,6,3,3,0,0,-1,-1,0,6,6,6,3,6,6,3,0,3,0,-1,-1,-1,0,6,6,3,3,3,3,3,0,3,0,-1,-1,-1,0,0,3,3,3,3,3,3,3,0,0,-1,-1,-1,-1,0,0,3,3,3,3,3,0,0,-1,-1,-1,-1,-1,-1,0,0,0,0,0,0,0,-1,-1,-1,-1,-1,-1,-1,0,4,4,0,0,4,0,-1,-1,-1,-1,-1,-1,-1,0,4,0,3,3,0,0,-1,-1,-1,-1,-1,-1,-1,0,4,0,3,3,0,0,-1,-1,-1,-1,-1,-1,-1,0,0,1,0,0,1,0,-1,-1,-1,-1,-1,-1,-1,-1,0,1,1,1,1,0,-1,-1,-1,-1,-1,-1,-1,-1,0,5,5,5,5,0,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,0,0,0,-1,-1,-1,-1,-1],K1=[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,0,0,0,-1,-1,-1,-1,-1,-1,-1,-1,0,0,6,6,6,6,0,0,-1,-1,-1,-1,-1,0,6,6,6,6,6,6,6,6,0,-1,-1,-1,-1,0,6,6,6,6,6,6,6,6,0,-1,-1,-1,0,6,6,6,6,6,6,6,6,3,6,0,-1,-1,0,6,6,6,6,6,6,6,3,3,0,-1,-1,-1,0,6,6,6,3,6,6,3,0,3,0,-1,-1,-1,0,6,6,3,3,3,3,3,0,3,0,-1,-1,-1,-1,0,3,3,3,3,3,3,3,0,-1,-1,-1,-1,-1,-1,0,0,3,3,3,3,0,0,-1,-1,-1,-1,-1,0,3,3,0,0,0,0,0,3,0,-1,-1,-1,-1,0,3,3,0,4,4,4,0,3,0,-1,-1,-1,-1,-1,0,0,4,4,4,4,0,0,-1,-1,-1,-1,-1,-1,0,1,1,1,0,1,1,0,0,-1,-1,-1,-1,0,5,0,1,1,0,1,0,5,5,0,-1,-1,-1,0,5,5,0,0,-1,0,5,5,0,-1,-1,-1,-1,-1,0,0,-1,-1,-1,-1,0,0,-1,-1,-1],Y1=[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,0,0,0,-1,-1,-1,-1,-1,-1,-1,-1,0,0,6,6,6,6,0,0,-1,-1,-1,-1,-1,0,6,6,6,6,6,6,6,6,0,-1,-1,-1,-1,0,6,6,6,6,6,6,6,6,0,-1,-1,-1,0,6,6,6,6,6,6,6,6,3,6,0,-1,-1,0,6,6,6,6,6,6,6,3,3,0,-1,-1,-1,0,6,6,6,3,6,6,3,0,3,0,-1,-1,-1,0,6,6,3,3,3,3,3,0,3,0,-1,-1,-1,-1,0,3,3,3,3,3,3,3,0,-1,-1,-1,-1,-1,-1,0,0,3,3,3,3,0,0,-1,-1,-1,-1,-1,0,3,0,0,0,0,0,3,3,0,-1,-1,-1,-1,0,3,0,4,4,4,0,3,3,0,-1,-1,-1,-1,-1,0,0,4,4,4,4,0,0,-1,-1,-1,-1,-1,-1,0,1,1,1,0,1,1,0,0,-1,-1,-1,-1,0,5,0,1,1,0,1,0,5,5,0,-1,-1,-1,0,5,5,0,0,-1,0,5,5,0,-1,-1,-1,-1,-1,0,0,-1,-1,-1,-1,0,0,-1,-1,-1];fc64Init(F1,G1);class k1{constructor(l,f,C,g){A(this,"x");A(this,"y");A(this,"width");A(this,"height");A(this,"red");A(this,"grn");A(this,"blu");A(this,"cyn");A(this,"mag");A(this,"yel");this.x=l,this.y=f,this.width=C,this.height=g,this.red=swapImageColors(Y,[COL_BLK],[COL_RED]),this.grn=swapImageColors(Y,[COL_BLK],[COL_GRN]),this.blu=swapImageColors(Y,[COL_BLK],[COL_BLU]),this.cyn=swapImageColors(Y,[COL_BLK],[COL_CYN]),this.mag=swapImageColors(Y,[COL_BLK],[COL_MAG]),this.yel=swapImageColors(Y,[COL_BLK],[COL_YEL])}draw(){drawImage(this.x,this.y,this.width,this.height,b%18<3?this.red:b%18<6?this.grn:b%18<9?this.blu:b%18<12?this.cyn:b%18<15?this.mag:this.yel)}}class P{constructor(l,f,C){A(this,"x");A(this,"y");A(this,"color");A(this,"duration");this.x=l,this.y=f,this.color=C,this.duration=0}trigger(l){this.duration=l}updateAndDraw(){drawCircle(this.x,this.y,2,this.color,this.duration>0?this.color:-1),this.duration--}}class S1{constructor(l,f,C,g){A(this,"x");A(this,"y");A(this,"width");A(this,"height");A(this,"facing");A(this,"moving");A(this,"movingTicks");A(this,"animU");A(this,"animD");A(this,"animL");A(this,"animR");this.x=l,this.y=f,this.width=C,this.height=g,this.facing="D",this.moving=!1,this.movingTicks=0,this.animU=new Anim([h1,E1,h1,N1],9,!0),this.animD=new Anim([g1,U1,g1,b1],9,!0),this.animL=new Anim([A1,M1,A1,I1],9,!0),this.animR=new Anim([f1,K1,f1,Y1],9,!0)}updateAndDraw(){this.moving?this.movingTicks++:this.movingTicks=0;const l=this.facing=="U"?this.animU:this.facing=="D"?this.animD:this.facing=="L"?this.animL:this.animR;drawImage(this.x,this.y,this.width,this.height,l.getKeyFrame(this.movingTicks))}}let b,p1,p,M;function F1(){b=0,p1=new k1(0,2,64,23),p=new Map([["U-P",new P(8,30,COL_BLU)],["U-JP",new P(14,30,COL_BLU)],["U-JR",new P(20,30,COL_BLU)],["D-P",new P(8,36,COL_RED)],["D-JP",new P(14,36,COL_RED)],["D-JR",new P(20,36,COL_RED)],["L-P",new P(8,42,COL_MAG)],["L-JP",new P(14,42,COL_MAG)],["L-JR",new P(20,42,COL_MAG)],["R-P",new P(8,48,COL_GRN)],["R-JP",new P(14,48,COL_GRN)],["R-JR",new P(20,48,COL_GRN)],["A-P",new P(8,54,COL_CYN)],["A-JP",new P(14,54,COL_CYN)],["A-JR",new P(20,54,COL_CYN)],["B-P",new P(8,60,COL_YEL)],["B-JP",new P(14,60,COL_YEL)],["B-JR",new P(20,60,COL_YEL)]]),M=new S1(39,36,14,18)}function G1(){b++,$1(),clearGfx(),p1.draw(),drawText(1,28,`U     ${peek(4096)}`,COL_BLU),drawText(1,34,`D     ${peek(4097)}`,COL_RED),drawText(1,40,`L     ${peek(4098)}`,COL_MAG),drawText(1,46,`R     ${peek(4099)}`,COL_GRN),drawText(1,52,`A     ${peek(4100)}`,COL_CYN),drawText(1,58,`B     ${peek(4101)}`,COL_YEL),p.forEach(n=>n.updateAndDraw());for(let n=29;n<63;n++)for(let l=28;l<63;l++)drawPixel(n,l,randomInt(0,1)==0?COL_BLK:COL_WHT);M.updateAndDraw()}function $1(){var n,l,f,C,g,L,J,k,S,R,y,_,W,V,v,D,F,G;isPressed(BTN_U)&&((n=p.get("U-P"))==null||n.trigger(1),M.facing="U"),isJustPressed(BTN_U)&&((l=p.get("U-JP"))==null||l.trigger(12)),isJustReleased(BTN_U)&&((f=p.get("U-JR"))==null||f.trigger(12)),isPressed(BTN_D)&&((C=p.get("D-P"))==null||C.trigger(1),M.facing="D"),isJustPressed(BTN_D)&&((g=p.get("D-JP"))==null||g.trigger(12)),isJustReleased(BTN_D)&&((L=p.get("D-JR"))==null||L.trigger(12)),isPressed(BTN_L)&&((J=p.get("L-P"))==null||J.trigger(1),M.facing="L"),isJustPressed(BTN_L)&&((k=p.get("L-JP"))==null||k.trigger(12)),isJustReleased(BTN_L)&&((S=p.get("L-JR"))==null||S.trigger(12)),isPressed(BTN_R)&&((R=p.get("R-P"))==null||R.trigger(1),M.facing="R"),isJustPressed(BTN_R)&&((y=p.get("R-JP"))==null||y.trigger(12)),isJustReleased(BTN_R)&&((_=p.get("R-JR"))==null||_.trigger(12)),isPressed(BTN_A)&&((W=p.get("A-P"))==null||W.trigger(1)),isJustPressed(BTN_A)&&((V=p.get("A-JP"))==null||V.trigger(12)),isJustReleased(BTN_A)&&((v=p.get("A-JR"))==null||v.trigger(12)),isPressed(BTN_B)&&((D=p.get("B-P"))==null||D.trigger(1)),isJustPressed(BTN_B)&&((F=p.get("B-JP"))==null||F.trigger(12)),isJustReleased(BTN_B)&&((G=p.get("B-JR"))==null||G.trigger(12)),M.moving=isPressed(BTN_U)||isPressed(BTN_D)||isPressed(BTN_L)||isPressed(BTN_R)}
